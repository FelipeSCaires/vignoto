let router;class App{constructor(){this.init()}createRouter(){router=new JetRouter({routes:{[global.root]:e=>{this.page.load(`${global.root}/`,e,()=>new Index)}},notFound:e=>{this.page.load(`${global.root}/pagina-nao-encontrada.php`,e)},onInit:()=>this.popState(),onHash:e=>{const t=document.querySelector(e);t&&setTimeout(()=>{t.scrollIntoView({behavior:"smooth"})},300)}})}popState(){window.addEventListener("popstate",()=>{this.page.pop=!0,this.runRouter()})}addRoutes(){config.pages.forEach(e=>{const t=[`${global.root}/${e[0]}`,`${global.root}/${e[0]}/*parameters`];t.forEach((i,s)=>{router.add(i,o=>{let n=i;global.root&&(n=t[s].split(global.root)[1]),(t[s].includes("*")||t[s].includes(":"))&&(n=n.split("/"),n=n.slice(0,n.length-1).join("/")),n=n.replace(/\//g,"-"),n.startsWith("-")&&(n=n.substr(1)),this.page.load(`${global.root}/${n}.php`,o,()=>{if(e[1]){const t=new Function(`new ${e[1]}`);t()}})})})})}runRouter(){const e=`${location.pathname}${location.search}`;router.listen(e)}init(){window.onload=(()=>{this.page=new Page,new JetBrowser,this.createRouter(),this.addRoutes(),this.runRouter()})}}new App;class Card{constructor(){this.init()}gallery(){const e=document.querySelectorAll(".card__gallery-slider");e.forEach(e=>{const t=e.classList[1].replace("card__gallery-slider--",""),i=document.querySelector(`.card__gallery-number--${t}`);this[`${t}GallerySlider`]=new JetSlider({element:`.card__gallery-slider--${t}`,prev:`.card__gallery-prev--${t}`,next:`.card__gallery-next--${t}`,gap:10,loop:!0,onChange:e=>{i.innerHTML=e}})})}galleryExpand(){if(window.innerWidth>1080){const e=document.querySelectorAll(".card__gallery-options-btn--expand, .card__gallery-close-btn"),t=document.querySelector("html");e.forEach(e=>{e.addEventListener("click",()=>{t.classList.toggle("expand"),this.resizeSliders()})}),window.addEventListener("resize",()=>{window.innerWidth<1081&&(t.classList.remove("expand"),this.resizeSliders())})}}resizeSliders(){const e=document.querySelectorAll(".card__gallery-slider");e.forEach(e=>{const t=e.classList[1].replace("card__gallery-slider--","");this[`${t}GallerySlider`].resize()})}galleryChange(){const e=document.querySelectorAll("button.card__gallery-change-btn"),t=document.querySelector(".card__gallery-container");e.forEach(i=>{const s=[...i.classList].filter(e=>e.includes("card__gallery-change-btn--"))[0].replace("card__gallery-change-btn--","");i.addEventListener("click",()=>{if(t.classList.contains(s)||(t.classList.remove(t.classList[1]),t.classList.add(s)),e.forEach(e=>e.classList.remove("card__gallery-change-btn--active")),i.classList.add("card__gallery-change-btn--active"),"map"===s&&!this.map){const e=["css/leaflet.min.css","js/leaflet.min.js"];this.loadScript(e,this.createMap.bind(this))}})})}loadScript(e,t){const i=e.map(e=>this.createTag(e));Promise.all(i).then(t)}createTag(e){return new Promise(t=>{const i=e.split(".").pop(),s="js"===i?"script":"link",o="js"===i?"src":"href",n=document.createElement(s),a=document.querySelector(`${s}[${o}="${e}"]`);a&&a.remove(),n[o]=e,"css"===i&&(n.rel="stylesheet"),document.body.appendChild(n),n.onload=(()=>t(e))})}createMap(){const e=document.querySelector("#map"),t="https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",i=e.dataset.latitude,s=e.dataset.longitude;this.map=L.map("map").setView([i,s],15),L.tileLayer(t,{id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(this.map);const o=L.icon({iconUrl:"svg/marker.svg",iconSize:[40,40],iconAnchor:[20,20]});L.marker([i,s],{icon:o}).addTo(this.map)}similar(){return new JetSlider({element:".similar",prev:".similar__pagination-prev",next:".similar__pagination-next",slidesToShow:{0:1,568:2,821:3,1081:4},slidesToScroll:{0:1,568:2,821:3,1081:4},speed:650,gap:30,loop:!1,pagination:".similar__pagination"})}init(){this.gallery(),this.galleryExpand(),this.galleryChange(),this.similar()}}class Client{constructor(e){this.inputUser=document.querySelector(".client__id"),this.inputPassword=document.querySelector(".client__password"),this.sliderContainer=document.querySelector(".client__slider-container"),this.enterBtn=document.querySelector(".client__btn"),this.exitBtn=document.querySelector(".client__logout"),this.recoverPasswordBtn=document.querySelector(".client__recover-password"),this.inputCurrentPassword=document.querySelector(".client__current-password"),this.inputNewPassword=document.querySelector(".client__new-password"),this.inputConfirmPassword=document.querySelector(".client__confirm-password"),this.changePasswordBtn=document.querySelector(".client__btn-password"),this.welcome=document.querySelector(".client__welcome"),this.init(e)}getUserSubmit(){const e=document.querySelector(".client__get-user");e&&e.addEventListener("submit",t=>{t.preventDefault();const i=new FormData(e),s=i.get("user");this.getUser(s)})}getUser(e){return new JetLoader({url:`${config.pcoBaseUrl}api/usuarios/accounts?model.usuario=${e}`,onSuccess:e=>this.user(e),onError:()=>this.loginError("Usuário inexistente")})}user(e){const t=document.querySelector(".client__user-box");t.innerHTML="";for(let i in e)t.insertAdjacentHTML("beforeend",`<button class="client__user-box-item" data-id="${e[i].ClienteReferencia}">${e[i].ClienteNome}<br>${e[i].ClienteEmail}</button>`);this.sliderContainer.style.transform="translateX(-33.333333%)",this.setUserButton()}setUserButton(){const e=document.querySelectorAll(".client__user-box-item");e.forEach(e=>{e.addEventListener("click",t=>{t.stopImmediatePropagation();const i=e.dataset.id;this.inputUser.value=i,this.sliderContainer.style.transform="translateX(-66.666666%)"})})}loginButton(){this.enterBtn&&this.enterBtn.addEventListener("click",()=>{const e=this.inputUser.value,t=this.inputPassword.value,i=this.inputUser.checkValidity(),s=this.inputPassword.checkValidity(),o=document.querySelector(".client__login"),n=document.querySelector(".client__preloader");i&&s&&(this.loginAuth(e,t),o.classList.add("client__login--active"),n.classList.add("client__preloader--active"))})}loginAuth(e,t){return new JetLoader({url:`${config.pcoBaseUrl}token`,method:"post",header:{"content-type":"application/x-www-form-urlencoded"},body:`username=${e}&password=${t}&grant_type=password&empresa=${config.idCliente}`,onSuccess:t=>this.login(e,t.access_token),onError:()=>this.loginError("Usuário ou senha incorreta")})}login(e,t){const i=new FormData;i.append("idcliente",config.idCliente),i.append("username",e),i.append("token",t),sessionStorage.setItem("token",t);new JetLoader({url:`${global.base}form/login.php`,method:"post",body:i,onSuccess:e=>{"pageProprietario"===e?router.listen(config.pageProprietario):"pageInquilino"===e?router.listen(config.pageInquilino):"pageProprietarioIr"===e?router.listen(config.pageProprietarioIr):"inquilinoIr"===e?router.listen(config.pageInquilinoIr):router.listen(`${config.pageAviso}?msn=doc`)},onError:()=>this.loginError("Usuário ou senha incorreta.")})}loginError(e){const t=document.querySelector(".client__login"),i=document.querySelector(".client__preloader"),s=document.querySelector(".client__preloader-icon"),o=document.querySelector(".client__preloader-text"),n=o.innerHTML;s.style.display="none",o.innerHTML=e,setTimeout(()=>{t.classList.remove("client__login--active"),i.classList.remove("client__preloader--active"),s.style.display="flex",o.innerHTML=n},3e3)}autoLogin(){const e=new URLSearchParams(window.location.search);e.get("id")&&(this.inputUser.value=e.get("id"),this.inputPassword.value=e.get("pwd"),this.loginAuth(e.get("id"),e.get("pwd")))}logout(){this.exitBtn&&this.exitBtn.addEventListener("click",()=>{const e=new FormData;e.append("idcliente",config.idCliente);new JetLoader({url:`${global.base}form/logout.php`,method:"post",body:e,onSuccess:()=>{router.listen(config.pageSouCliente)}})})}recoverPasswordButton(){this.recoverPasswordBtn&&this.recoverPasswordBtn.addEventListener("click",()=>{const e=this.inputUser.value,t=this.inputUser.checkValidity();t&&this.recoverPassword(e)})}recoverPassword(e){return new JetLoader({url:`${config.pcoBaseUrl}api/usuarios/recuperarsenha?usuario=${e}&empresa=${config.idCliente}`,method:"post",header:{authorization:`bearer ${sessionStorage.getItem("token")}`},onSuccess:e=>this.recoverPasswordSuccess(e),onError:()=>this.loginError()})}recoverPasswordSuccess(e){this.loginError("Sua senha foi envida para seu email!"),router.listen(config.pageSouCliente)}changePasswordButton(){this.changePasswordBtn&&this.changePasswordBtn.addEventListener("click",()=>{const e=this.inputCurrentPassword.value,t=this.inputNewPassword.value,i=this.inputConfirmPassword.value,s=this.inputCurrentPassword.checkValidity(),o=this.inputNewPassword.checkValidity(),n=this.inputCurrentPassword.checkValidity();s&&o&&n&&this.changePassword(e,t,i)})}changePassword(e,t,i){return new JetLoader({url:`${config.pcoBaseUrl}api/usuarios/trocarsenha?senha=${e}&senhaNova=${t}&confirmarSenha=${i}`,method:"post",header:{authorization:`bearer ${sessionStorage.getItem("token")}`},onSuccess:e=>this.changePasswordSuccess(e),onError:()=>this.loginError()})}changePasswordSuccess(e){router.listen(config.pageSouCliente)}boletoBtns(){const e=document.querySelectorAll(".client__download");e.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.codigo,i=e.dataset.token;this.boleto(t,i)})})}boleto(e,t){return new JetLoader({url:`${config.pcoBaseUrl}api/prestacao-contas/inquilinos/boleto/${e}/pdf`,header:{authorization:`bearer ${t}`},onSuccess:t=>this.boletoSuccess(t,e)})}boletoSuccess(e,t){const i=new Blob([e],{type:"application/pdf"}),s=window.URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=`boleto-${t}.pdf`,document.querySelector("body").appendChild(o),o.click(),window.URL.revokeObjectURL(s),o.remove()}printButton(){const e=document.querySelector(".client__print");e&&e.addEventListener("click",()=>this.print())}print(){const e=document.querySelector("#toPrint"),t=window.open("");setTimeout(()=>{t.document.write('<style>body{font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif}</style>'),t.document.write(e.innerHTML),t.print(),t.close()},30)}init(e){this.autoLogin(),this.getUserSubmit(),this.loginButton(),this.logout(),this.recoverPasswordButton(),this.changePasswordButton(),this.boletoBtns(),this.printButton()}}class Favorite{constructor(){this.init()}favorite(){new JetFavorite({form:".favorite__form",pageLink:".favorite__link",favorite:".favorite__btn",deleteAll:".favorite__delete",counter:".favorite__counter",idType:"cliente",id:config.id,onInit:()=>{},onLogin:()=>this.login(),onNoLogin:()=>this.noLogin(),onRemove:()=>this.remove(),onRemoveAll:()=>this.removeAll()})}login(){const e=document.querySelector(".favorite__form"),t=document.querySelector(".favorite__login-input"),i=document.querySelector(".favorite"),s=sessionStorage.getItem(`favorite-user-${config.id}`),o=`${config.pageFavoritos}?user=${s}`,n=e.querySelector(".form__content"),a=e.querySelector(".form__success");n.classList.add("form__content--hidden"),a.classList.add("form__success--active"),setTimeout(()=>{t.checked=!1,n.classList.remove("form__content--hidden"),a.classList.remove("form__success--active"),i&&router.listen(o)},3e3)}noLogin(){const e=document.querySelector(".favorite__login-input");e.checked=!0}remove(){const e=document.querySelector(".favorite"),t=`${config.pageFavoritos}${window.location.search}`;e&&router.listen(t)}removeAll(){const e=document.querySelector(".favorite__delete-input"),t=`${config.pageFavoritos}${window.location.search}`,i=document.querySelector(".favorite__delete-content"),s=document.querySelector(".favorite__delete-success");i.classList.add("form__content--hidden"),s.classList.add("form__success--active"),setTimeout(()=>{e.checked=!1,router.listen(t),i.classList.remove("form__content--hidden"),s.classList.remove("form__success--active")},3e3)}exit(){const e=document.querySelector(".favorite__exit");e&&e.addEventListener("click",this.exitHandler.bind(this))}exitHandler(){sessionStorage.removeItem(`favorite-token-${config.id}`),sessionStorage.removeItem(`favorite-user-${config.id}`),router.listen(config.pageFavoritos)}pagination(){const e=document.querySelector(".ui__pagination-box");if(e){new JetPagination({container:".ui__pagination",previous:".ui__pagination-previous",next:".ui__pagination-next",active:e.dataset.page,total:e.dataset.total,left:{568:2,0:1},right:{568:2,0:1},concatenateWith:"/",onComplete:()=>router.updateLinks()})}}init(){this.favorite(),this.exit(),this.pagination()}}class Filters{constructor(e){this.page=e}filtersUrl(e){const t=sessionStorage.getItem("filtro.tipodivulgacao"),i=sessionStorage.getItem(`filters-${t}`);if(i)e(JSON.parse(i));else{let i=config.filters.map(e=>e[1]?"":`${e}=true`);i[0]&&(i.push({"filtro.tipodivulgacao":t,[`filtro.${config.tipoCliente}id`]:config.id,maximo:999999,pagina:1}),this.createUrl(t,i,e))}}dynamicFiltersUrl(e){const t=sessionStorage.getItem("filtro.tipodivulgacao"),i=sessionStorage.getItem(`filters-${t}`);if(i){const e=JSON.parse(i);this.dynamicsFilters.forEach(t=>delete e[t]),t?sessionStorage.setItem(`filters-${t}`,JSON.stringify(e)):sessionStorage.setItem("filters",JSON.stringify(e))}config.filters.forEach(i=>{if(i[1]){let s=[],o={"filtro.tipodivulgacao":t,[`filtro.${config.tipoCliente}id`]:config.id,maximo:999999,pagina:1};i[1].forEach(e=>{o[`filtro.${e}`]=sessionStorage.getItem(`filtro.${e}`)}),s.push(`${i[0]}=true`,o),this.createUrl(t,s,e,!0)}})}createUrl(e,t,i,s){new JetSearch({baseUrl:`${config.filterBaseUrl}?`,parameters:t,joinWith:"=",concatenateWith:"&",onComplete:t=>this.loadFilters(e,t,i,s)})}loadFilters(e,t,i,s){this.loader=new JetLoader({url:t,onSuccess:t=>{let o;o=e?sessionStorage.getItem(`filters-${e}`):sessionStorage.getItem("filters"),t=this.joinJson(t.data),s&&this.dynamicsFilters.push(Object.keys(t)[0]),o&&(t=Object.assign(JSON.parse(o),t)),e?sessionStorage.setItem(`filters-${e}`,JSON.stringify(t)):sessionStorage.setItem("filters",JSON.stringify(t)),Object.keys(t).length===config.filters.length&&i(t)}})}joinJson(e){let t={};for(let i in e){const s=i.toLowerCase();if(e[i]&&e[i].resultado){const o=this.combineJson(e[i].resultado);t[s]=o}}return t}combineJson(e){let t={};return e.forEach(e=>{for(let i in e)t[i]||(t[i]=[]),t[i].push(e[i])}),t}createFilters(e){const t=sessionStorage.getItem("filtro.tipodivulgacao"),i=JSON.parse(sessionStorage.getItem(`filters-${t}`));this.dynamicsFilters=[],i&&Object.keys(i).length!==config.filters.length&&sessionStorage.removeItem(`filters-${t}`),this.loader&&this.loader.abort(),this.filtersUrl(e),this.dynamicFiltersUrl(e)}checkFilter(e){let t=sessionStorage.getItem(e);if(t)if("filtro.tipodivulgacao"===e)t="a"===t?"comprar alugar":"v"===t?"comprar":"l"===t?"alugar":"temporada";else if("filtro.vagagaragem"===e||"filtro.vagaini"===e)t-=2;else if("filtro.finalidade"===e)t="r"===t?"residenciais":"c"===t?"comerciais":"ambos";else if("filtro.mobiliado"===e)t&&(t="mobiliado");else if("filtro.condominio"===e){if(t)return"em condominio"}else"filtro.cobertura"===e&&t&&(t="cobertura");else t="";return t}createPath(e){return new JetSearch({button:".search__btn",baseUrl:`${this.page}/`,concatenateWith:"-",parameters:[sessionStorage.getItem("filtro.tiposimoveis"),this.checkFilter("filtro.finalidade"),this.checkFilter("filtro.mobiliado"),this.checkFilter("filtro.condominio"),this.checkFilter("filtro.cobertura"),this.checkFilter("filtro.tipodivulgacao"),sessionStorage.getItem("filtro.cidade"),sessionStorage.getItem("filtro.bairro"),sessionStorage.getItem("filtro.estado"),[sessionStorage.getItem("filtro.quarto"),"quartos"],[sessionStorage.getItem("filtro.quartoini"),"ou mais quartos"],[sessionStorage.getItem("filtro.suite"),"suites"],[sessionStorage.getItem("filtro.suiteini"),"ou mais suites"],[sessionStorage.getItem("filtro.banheiro"),"banheiros"],[sessionStorage.getItem("filtro.banheiroini"),"ou mais banheiros"],[this.checkFilter("filtro.vagagaragem"),"vagas"],[this.checkFilter("filtro.vagaini"),"ou mais vagas"],["de",sessionStorage.getItem("filtro.valorminimo")],["ate",sessionStorage.getItem("filtro.valormaximo")],["de",`${sessionStorage.getItem("filtro.areautilminima")}m2`],["ate",`${sessionStorage.getItem("filtro.areautilmaxima")}m2`],["de",`${sessionStorage.getItem("filtro.areatotalminima")}m2 total`],["ate",`${sessionStorage.getItem("filtro.areatotalmaxima")}m2 total`]],query:{foto:sessionStorage.getItem("filtro.comfoto"),regiao:sessionStorage.getItem("filtro.regiaocidade"),cat:sessionStorage.getItem("filtro.categoriaid"),ord:this.checkFilter("ordenacao"),ascdesc:this.checkFilter("ascdesc")},alternative:{referencia:[["referencia",sessionStorage.getItem("filtro.referencia")]],edificio:[["edificio",sessionStorage.getItem("filtro.edificio")]],endereco:[["endereco",sessionStorage.getItem("filtro.endereco")]]},regex:[[/[`~!@#$%^&*()_|+\-=?;:'",<>\{\}\[\]\\\/]/gi," "],[/\s+/g,"-"],[/ç/g,"c"],[/[àáâãäå]/g,"a"],[/[èéêë]/g,"e"],[/[ìíîï]/g,"i"],[/[òóôõö]/g,"o"],[/[ùúûü]/g,"u"]],onComplete:t=>{e&&router.listen(t)}})}search(){this.createPath(!0)}addData(e){e.filter.remove(),e.filter.add(e),e.filter.update()}removeStorage(){const e=new JetSearch;e.removeStorage("session","filtro","filtro.tipodivulgacao")}}class Form{constructor(){this.init()}form(){const e=document.querySelectorAll("form[id]");e.forEach(e=>{this[`inputsFile${e.id}`]=e.querySelectorAll('[type="file"]'),this[`inputsRequired${e.id}`]=[...this[`inputsFile${e.id}`]].map(e=>e.required),e.addEventListener("submit",this.submit.bind(this,e)),this.fileAttachment(e)})}submit(e){event.preventDefault(),this.inputFileManager(e);const t=e.id,i=new FormData(e),s=e.querySelector(".form__content"),o=e.querySelector(".form__sending");s.classList.add("form__content--hidden"),o.classList.add("form__sending--active"),this.updateFormData(e,i);new JetLoader({url:`${global.base}form/${t}.php`,method:"post",body:i,onSuccess:()=>this.submitSuccess(e)})}submitSuccess(e){const t=e.querySelector(".form__sending"),i=e.querySelector(".form__success");t.classList.remove("form__sending--active"),i.classList.add("form__success--active"),this.inputFileManager(e),this.successButton(e),this.resetInputFile(e),this.clearFileList(e),e.reset()}successButton(e){const t=e.querySelector(".form__success-btn");t.addEventListener("click",this.successButtonHandler.bind(this,e))}successButtonHandler(e){const t=e.querySelector(".form__content"),i=e.querySelector(".form__sending"),s=e.querySelector(".form__success");t.classList.remove("form__content--hidden"),i.classList.remove("form__status--active"),s.classList.remove("form__success--active")}inputFileManager(e){this[`inputsFile${e.id}`].forEach(e=>{e.disabled=!e.disabled})}fileAttachment(e){this[`inputsFile${e.id}`].forEach(e=>{const t=e.name,i=e.required;this[`fileList${t}`]={},e.addEventListener("change",this.fileAttachmentHandler.bind(this,e,t,i))})}fileAttachmentHandler(e,t,i){const s=e.nextElementSibling,o=[...e.files];o.forEach(o=>{const n=o.name.replace(/[/[ .]/g,"-"),a=this.fileTemplate(o,n);this[`fileList${t}`][n]=o,s.append(a),this.fileDelete(e,a,this[`fileList${t}`],n,i)}),e.value="",this.checkDisabled(e,this[`fileList${t}`],i)}updateFormData(e,t){this[`inputsFile${e.id}`].forEach(e=>{const i=e.name;Object.values(this[`fileList${i}`]).forEach(e=>t.append(i,e))})}fileTemplate(e,t){const i=document.createElement("li"),s=document.createElement("button"),o=document.createElement("div"),n=document.createElement("img");return i.className="form__input-file-item",s.className="form__input-file-btn",s.id=t,o.className="form__input-file-text",o.innerHTML=e.name,n.className="form__input-file-icon",n.src="svg/trash.svg",s.appendChild(o),s.appendChild(n),i.appendChild(s),i}fileDelete(e,t,i,s,o){const n=t.querySelector("button");t.addEventListener("click",this.fileDeleteHandler.bind(this,e,n,i,s,o))}fileDeleteHandler(e,t,i,s,o){delete i[s],t.parentElement.remove(),this.checkDisabled(e,i,o)}resetInputFile(e){this[`inputsFile${e.id}`].forEach((t,i)=>{const s=this[`inputsRequired${e.id}`][i];s&&(t.required=!0)})}clearFileList(e){this[`inputsFile${e.id}`].forEach(e=>{const t=e.nextElementSibling;t.innerHTML=""})}checkDisabled(e,t,i){if(i){const i=Object.keys(t)[0];e.required=!i}}init(){this.form()}}class Index{constructor(){this.init()}banner(){return new JetSlider({element:".banner__box",prev:".banner__prev",next:".banner__next",slidesToShow:{0:1},slidesToScroll:{0:1},speed:650,gap:30,momentum:!0,weight:100,loop:!1,autoplay:!1,autoplaySpeed:5e3,stopOnOver:!0,pagination:".banner__pagination"})}offer(){const e=[".offer-buy",".offer-rent"];e.forEach(e=>new JetSlider({element:e,prev:`${e}__prev`,next:`${e}__next`,slidesToShow:{0:1,568:2,821:3},slidesToScroll:{0:1,568:2,821:3},speed:650,gap:30,momentum:!0,weight:100,loop:!1,autoplay:!1,autoplaySpeed:5e3,stopOnOver:!0,pagination:`${e}__pagination`}))}openModal(){let e=document.querySelector(".header__modal--contact"),t=document.querySelector("#teste");t.addEventListener("click",()=>{e.classList.toggle("display"),t.classList.toggle("rotate")})}init(){new SearchIndex,this.banner(),this.offer(),this.openModal()}}class JetBrowser{constructor(e){this.config=JetBrowser.extend(e),this.userAgent=navigator.userAgent,this.vendor=navigator.vendor,this.browser,this.device,this.orientation,this.touch,this.eventTimeout,this.chrome,this.firefox,this.safari,this.opera,this.edge,this.ie,this.init(),this.config.onInit()}static extend(e){const t={onInit:()=>{},onDetect:e=>{}};for(const i in e)t[i]=e[i];return t}browserName(){return this.isChrome(),this.isFirefox(),this.isSafari(),this.isOpera(),this.isEdge(),this.isIe(),this.browser}deviceType(){return/Mobi|Android/i.test(this.userAgent)?this.device="mobile":this.device="desktop",this.device}addClass(e){document.documentElement.classList.add(`jetbrowser__${e}`)}removeClass(e){document.documentElement.classList.remove(`jetbrowser__${e}`)}isChrome(){return/Chrome/.test(this.userAgent)&&/Google Inc/.test(this.vendor)&&(this.browser="chrome",this.chrome=!0),this.chrome}isFirefox(){return"undefined"!=typeof InstallTrigger&&(this.browser="firefox",this.firefox=!0),this.firefox}isSafari(){return(/constructor/i.test(window.HTMLElement)||(e=>"[object SafariRemoteNotification]"===e.toString())(!window.safari||void 0!==this.safari&&this.safari.pushNotification))&&(this.browser="safari",this.safari=!0),this.safari}isOpera(){return(window.opr&&opr.addons||window.opera||this.userAgent.indexOf(" OPR/")>=0)&&(this.browser="opera",this.opera=!0),this.opera}isEdge(){return!this.isIe()&&window.StyleMedia&&(this.browser="edge",this.edge=!0),this.edge}isIe(){return document.documentMode&&(this.browser="ie",this.ie=!0),this.ie}getOrientation(){return window.innerHeight>window.innerWidth?(this.orientation="portrait",this.removeClass("landscape"),this.addClass("portrait")):(this.orientation="landscape",this.removeClass("portrait"),this.addClass("landscape")),this.orientation}isTouch(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?(this.touch="touchevents",this.removeClass("no-touchevents"),this.addClass("touchevents")):(this.touch="no-touchevents",this.removeClass("touchevents"),this.addClass("no-touchevents")),this.touch}resize(){this.eventTimeout||(this.eventTimeout=setTimeout(()=>{this.eventTimeout=null,this.getOrientation()},250))}init(){window.onresize=this.resize.bind(this),this.browserName(),this.deviceType(),this.addClass(this.browser),this.addClass(this.device),this.getOrientation(),this.isTouch(),this.resize(),this.config.onDetect({browser:this.browser,device:this.device,orientation:this.orientation})}}class JetCheckbox{constructor(e){this.config=JetCheckbox.extend(e),this.elements="string"==typeof this.config.element?document.querySelectorAll(this.config.element):[this.config.element],this.names="string"==typeof this.config.name?[this.config.name]:this.config.name,this.optionsText=this.config.optionsText,this.optionsValue=this.config.optionsValue,this.optionsCounter=this.config.counter,this.activeClass="jetcheckbox__item--active",this.valueObject={},this.labelObject={},this.sortMap={},this.baseName,this.titles,this.storage,this.init(),this.config.onInit()}static extend(e){const t={element:"",name:"",checkLimit:"",optionsText:[],optionsValue:[],counter:[],uncheckAll:"",checkAll:"",label:"",sortBy:[],sortOrder:"ascending",sortTitle:!1,sortTotal:!1,tags:!1,tagsOnChange:!0,tagsTarget:"",filter:!1,filterEmpty:!0,filterTarget:"",filterPlaceholder:"",filterNotFound:"",filterType:"text",validateOperator:"",validateTarget:"",storage:"session",onInit:()=>{},onChange:e=>{},onUncheckAll:()=>{},onCheckAll:()=>{},onKeyUp:()=>{},onKeyDown:()=>{},onKeyEnter:()=>{},onFocus:()=>{},onBlur:()=>{},onClickTag:e=>{},onValidateError:()=>{},onLimit:()=>{}};for(const i in e)t[i]=e[i];return t}arrayLowerCase(e){e.forEach((t,i)=>{Array.isArray(t)?t.forEach((e,i)=>{isNaN(e)&&(t[i]=e.toLowerCase())}):isNaN(t)&&(e[i]=t.toLowerCase())})}setBaseName(e){const t=e.getAttribute("class");let i;"string"==typeof this.config.element?i=this.config.element.split(","):(i=this.config.element.className,i=i.split(" ")),i.forEach(s=>{s="string"==typeof this.config.element?s.trim().substr(1):i[0],t.indexOf(s)>-1&&(e.dataset.jetcheckboxName=s)}),this.baseName=e.dataset.jetcheckboxName}storageType(){"local"===this.config.storage?this.storage=localStorage:this.storage=sessionStorage}storageCheck(){this.names.forEach(e=>{if(this.storage.getItem(e)){const t=this.storage.getItem(e),i=t.split(",");this.valueObject[e]||(this.valueObject[e]=[]),i.forEach(t=>{t=t.toString().toLowerCase(),this.valueObject[e].push(t)})}})}update(){this.storageCheck(),this.names.forEach(e=>{this.storage.getItem(e)||(this.valueObject[e]||(this.valueObject[e]=[]),this.valueObject[e].push(""))}),this.elements.forEach(e=>{this.updateCheckbox(e),this.config.tags&&this.updateTags(e)})}updateTags(e){let t,i=document.createDocumentFragment();t=this.config.tagsTarget?document.querySelectorAll(this.config.tagsTarget):e.querySelectorAll(".jetcheckbox__label"),t.forEach(e=>{for(const s in this.labelObject)this.labelObject[s].forEach(s=>{const o=`[data-jetcheckbox-id="${this.config.name}"][data-jetcheckbox-label="${s}"]`,n=e.querySelector(o),a=document.querySelector(`.${this.baseName}-item[data-jetcheckbox-text="${s}"]`),r=a.dataset.jetcheckboxValue.split(",");if(this.config.tagsTarget||(t[0].innerHTML=""),!n){const e=this.createTag(s,r);i.appendChild(e)}});e.appendChild(i)})}addTags(e,t){let i,s=document.createDocumentFragment();this.config.tagsTarget?i=document.querySelectorAll(this.config.tagsTarget):(i=e.querySelectorAll(".jetcheckbox__label"),i[0].querySelector(".jetcheckbox__tag")||(i[0].innerHTML="")),i.forEach(i=>{const o=`[data-jetcheckbox-id="${this.config.name}"][data-jetcheckbox-label="${t}"]`,n=i.querySelector(o),a=e.querySelector(`[data-jetcheckbox-text="${t}"]`),r=a.dataset.jetcheckboxValue.split(",");if(!n){const e=this.createTag(t,r);s.appendChild(e),i.appendChild(s)}})}removeTags(e,t){let i;i=this.config.tagsTarget?document.querySelectorAll(this.config.tagsTarget):e.querySelectorAll(".jetcheckbox__label"),i.forEach(e=>{const i=e.querySelector(`[data-jetcheckbox-id="${this.config.name}"][data-jetcheckbox-label="${t}"]`);i&&i.parentNode.removeChild(i),this.config.tagsTarget||e.querySelector(".jetcheckbox__tag")||(e.innerHTML=this.config.label)})}createTag(e,t){let i=document.createElement("span"),s=document.createElement("span"),o=document.createElement("span");return this.config.name.constructor!==Array&&(t=t.toString()),i.addEventListener("click",()=>{this.clickTag(t)}),o.className=`${this.baseName}-delete-btn jetcheckbox__delete-btn`,s.className=`${this.baseName}-tag-text jetcheckbox__tag-text`,i.className=`${this.baseName}-tag jetcheckbox__tag`,i.dataset.jetcheckboxId=this.config.name,i.dataset.jetcheckboxLabel=e,s.innerHTML=e,i.appendChild(s),i.appendChild(o),i}setLabel(e){const t=e.querySelectorAll(`.${this.activeClass}`),i=e.querySelector(".jetcheckbox__label");let s=[];const o=this.config.name;this.labelObject[o]||(this.labelObject[o]=[]),t.forEach(e=>{const t=e.dataset.jetcheckboxText,i=this.labelObject[o].indexOf(t);s.push(t),-1===i&&this.labelObject[o].push(t)}),this.config.label&&(s[0]?i.innerHTML=s.join(", "):i.innerHTML=this.config.label)}updateCheckbox(e){let t=this.names.map(e=>"");const i=Object.entries(this.valueObject);let s={};i.forEach(e=>{const i=this.names.indexOf(e[0]);t[i]=e}),t.forEach((e,t)=>{e[1].forEach((e,t)=>{s[t]||(s[t]=[]),s[t].push(e)})});for(const t in s){const i=s[t],o=e.querySelector(`[data-jetcheckbox-value="${i}"]:not(.jetcheckbox__item--uncheck-all)`);o&&(o.classList.add(this.activeClass),o.classList.add(`${this.baseName}-item--active`))}this.setLabel(e)}createCheckbox(e,t){let i=document.createDocumentFragment(),s=document.createElement("ul"),o=document.createElement("div"),n=document.createElement("span"),a=document.createElement("span");o.className=`${this.baseName}-btn jetcheckbox__btn`,n.className=`${this.baseName}-label jetcheckbox__label`,n.innerHTML=this.config.label,a.className=`${this.baseName}-icon jetcheckbox__icon`,s.className=`${this.baseName}-list jetcheckbox__list`,this.createList({element:e,list:s,text:this.optionsText,value:this.optionsValue,counter:this.optionsCounter,addIndex:0,index:t}),o.appendChild(n),o.appendChild(a),i.appendChild(o),i.appendChild(s),this.optionsText.toString()||e.classList.add("jetcheckbox--disabled"),e.classList.add("jetcheckbox"),e.appendChild(i),this.createTotal(e)}createList(e){this.config.filter&&this.createSearchInput(e.element,e.list,e.index),this.config.uncheckAll&&this.createCheck({element:e.element,list:e.list,itemClass:" jetcheckbox__option--uncheck-all",btnClass:" jetcheckbox__item--uncheck-all",text:this.config.uncheckAll,value:"",addIndex:e.addIndex,index:e.index}),this.config.checkAll&&this.createCheck({element:e.element,list:e.list,itemClass:" jetcheckbox__option--check-all",btnClass:" jetcheckbox__item--check-all",text:this.config.checkAll,value:"*",addIndex:e.addIndex,index:e.index}),e.text.forEach((t,i)=>{this.config.sortTitle&&this.createTitle({list:e.list,text:this.sortMap[i]}),this.createCheck({element:e.element,list:e.list,itemClass:"",btnClass:"",text:t,value:this.optionsValue[i],counter:this.optionsCounter,optionIndex:i,addIndex:e.addIndex,index:e.index})})}createTitle(e){if(-1===this.titles.indexOf(e.text)){let t=document.createElement("ul"),i=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");this.titles.push(e.text),t.className=`${this.baseName}-group jetcheckbox__group`,i.className=`${this.baseName}-title jetcheckbox__title`,s.className=`${this.baseName}-name jetcheckbox__name`,o.className=`${this.baseName}-total jetcheckbox__total`,t.dataset.jetcheckboxTitle=e.text,s.innerHTML=e.text,i.appendChild(s),i.appendChild(o),t.appendChild(i),e.list.appendChild(t)}}createTotal(e){if(this.config.sortTitle&&this.config.sortTotal){const t=e.querySelectorAll(".jetcheckbox__group");t.forEach(e=>{let t=e.querySelector(".jetcheckbox__total");const i=e.querySelectorAll("li");let s=0;i.forEach(e=>{if(this.optionsCounter&&this.optionsCounter.length){const t=e.querySelector(".jetcheckbox__counter");s=Number(t.innerHTML)}else s=i.length}),t.innerHTML=s})}}createCheck(e){let t=document.createElement("li"),i=document.createElement("label"),s=document.createElement("span");const o=e.list.querySelector('[jetcheckbox-title="'+this.sortMap[e.optionIndex]+'"]');t.className=`${this.baseName}-option jetcheckbox__option${e.itemClass}`,i.className=`${this.baseName}-item jetcheckbox__item${e.btnClass}`,s.className=`${this.baseName}-text jetcheckbox__text`,i.dataset.jetcheckboxText=e.text,i.dataset.jetcheckboxValue=e.value,s.innerHTML=e.text,i.appendChild(s),t.appendChild(i),o?(o.appendChild(t),this.addAtIndex(o,t,e.addIndex)):(e.list.appendChild(t),
this.addAtIndex(e.list,t,e.addIndex));let n=document.createElement("span");if(n.className=`${this.baseName}-checkbox jetcheckbox__checkbox`,i.insertBefore(n,s),e.counter&&e.counter.length){let t=document.createElement("span");t.className=`${this.baseName}-counter jetcheckbox__counter`,t.innerHTML=e.counter[e.optionIndex],i.appendChild(t)}i.addEventListener("click",()=>{this.clickEvent(e.value)})}addAtIndex(e,t,i){const s=e.children.length;i||(i=s),i>=e.children.length?e.appendChild(t):e.insertBefore(t,e.children[i])}add(e){this.optionsText=e.text,this.optionsValue=e.value,this.optionsCounter=e.counter,e.sort&&(this.titles=[],this.sort(e.sort)),this.elements.forEach((t,i)=>{const s=t.querySelector("ul");this.optionsText.toString()?t.classList.remove("jetcheckbox--disabled"):t.classList.add("jetcheckbox--disabled"),this.createList({element:t,list:s,text:this.optionsText,value:this.arrayLowerCase(this.optionsValue),counter:this.optionsCounter,addIndex:e.addIndex,index:i}),this.createTotal(t)})}remove(e){this.elements.forEach(t=>{const i=t.querySelector("ul");e?e.forEach(e=>{const t=i.querySelector(`[data-jetcheckbox-text="${e}"]`),s=t.dataset.jetcheckboxValue,o=this.optionsText.indexOf(e),n=this.optionsValue.indexOf(s);-1!==o&&(this.optionsText.splice(o,1),this.optionsValue.splice(n,1),t.parentNode.removeChild(t))}):(t.classList.add("jetcheckbox--disabled"),this.valueObject={},this.labelObject={},this.sortMap={},this.optionsText=[],this.optionsValue=[],i.innerHTML="")})}createSearchInput(e,t,i){let s=document.createElement("div"),o=document.createElement("input");s.className=`${this.baseName}-filter jetcheckbox__filter`,o.className=`${this.baseName}-input jetcheckbox__input`,o.type=this.config.filterType,this.config.filterPlaceholder&&(o.placeholder=this.config.filterPlaceholder),o.addEventListener("focus",this.config.focus),o.addEventListener("blur",this.config.blur),o.addEventListener("keyup",e=>{this.keyUp(i,e)}),this.config.filterTarget&&(t=document.querySelector(this.config.filterTarget)),s.appendChild(o),this.config.filterEmpty&&s.appendChild(this.emptyBtn(o,i)),t.appendChild(s)}emptyBtn(e,t){let i=document.createElement("a");return i.className=`${this.baseName}-empty-btn jetcheckbox__empty-btn`,i.addEventListener("click",i=>{e.value="",this.manageEmptyBtn("",t),this.manageFilter("",t),this.notFound(t),this.config.onKeyUp()}),i}manageEmptyBtn(e,t){const i=this.elements[t].querySelector(".jetcheckbox__empty-btn");i&&(i.style.display=e?"block":"none")}setStorage(e){let t;this.valueObject={},this.storageCheck(),this.names.forEach((i,s)=>{this.valueObject[i]||(this.valueObject[i]=[]),t=this.config.name.constructor===Array?e[s]:e;const o=this.valueObject[i].indexOf(t);-1===o?this.config.checkLimit&&this.config.checkLimit<=this.valueObject[i].length?this.config.onLimit():this.valueObject[i].push(t):this.valueObject[i].splice(o,1),this.valueObject[i][0]?this.storage.setItem(i,this.valueObject[i]):this.storage.removeItem(i)})}removeStorage(){this.names.forEach(e=>{this.valueObject[e]=[],this.storage.removeItem(e)})}validateNumber(e){const t=this.storage.getItem(this.config.validateTarget),i="<"===this.config.validateOperator&&t>e,s=">"===this.config.validateOperator&&t<e;if(null===t||i||s)return!0}clickEvent(e){!e||this.validateNumber(e)?(this.selectOption(e),e&&"*"!==e&&this.setStorage(e),e||this.config.onUncheckAll(),"*"===e&&this.config.onCheckAll(),e&&this.config.onChange(this.valueObject)):this.config.onValidateError()}checkAll(e,t){const i=this.config.tags&&this.config.tagsTarget;this.optionsValue.forEach((i,s)=>{if(!this.config.checkLimit||s<this.config.checkLimit){const s=e.querySelector(`[data-jetcheckbox-value="${i}"]`),o=s.dataset.jetcheckboxText;s.classList.contains(this.activeClass)&&option.selected||(s.classList.add(this.activeClass),s.classList.add(`${this.baseName}-item--active`),this.config.tags&&this.addTags(e,o,t),0===t&&this.setStorage(i))}}),!this.config.label||this.config.tags&&!i||this.setLabel(e)}uncheckAll(e){const t=this.config.tags&&this.config.tagsTarget;this.optionsValue.forEach(t=>{const i=e.querySelector(`[data-jetcheckbox-value="${t}"]`);let s;i&&(s=i.dataset.jetcheckboxText,i.classList.remove(this.activeClass),i.classList.remove(`${this.baseName}-item--active`),this.config.tags&&this.removeTags(e,s))}),this.removeStorage(),!this.config.label||this.config.tags&&!t||this.setLabel(e)}sort(e){this.sortMap=e.map((e,t)=>({index:t,value:e})),this.sortMap.sort((e,t)=>isNaN(e.value)&&isNaN(t.value)?+(e.value>t.value)||+(e.value===t.value)-1:e.value-t.value),this.optionsText=this.sortMap.map(e=>this.optionsText[e.index]),this.optionsValue=this.sortMap.map(e=>this.optionsValue[e.index]),this.optionsCounter&&this.optionsCounter.length&&(this.optionsCounter=this.sortMap.map(e=>this.optionsCounter[e.index])),this.sortMap=this.sortMap.map(e=>e[Object.keys(e)[1]]),"descending"===this.config.sortOrder&&(this.optionsText.reverse(),this.optionsValue.reverse(),this.optionsCounter.reverse(),this.sortMap.reverse())}filter(e,t){const i=t.split(" ");let s,o;for(let t=0;o=i[t++];){if(s=new RegExp(o,"ig"),!s.test(e))return!1;e=e.replace(s,"")}return!0}manageFilter(e,t){const i=this.elements[t].querySelectorAll("li:not(.jetcheckbox__option--uncheck-all):not(.jetcheckbox__option--check-all)"),s="jetcheckbox__option--hidden";i.forEach((i,o)=>{const n=this.elements[t].querySelector(`[data-jetcheckbox-title="${this.sortMap[o]}"]`);let a;if(n&&(a=n.querySelectorAll("li")),e){const t=i.querySelector("label");let o=t.innerHTML;if(this.filter(o,e))i.classList.remove(s),n&&a[0]&&n.classList.remove(s);else if(i.classList.add(s),n){const e=n.querySelectorAll(`li.${s}`);a.length===e.length&&n.classList.add(s)}}else i.classList.remove(s),n&&n.classList.remove(s)})}selectOption(e){this.elements.forEach((t,i)=>{const s=t.querySelector(`[data-jetcheckbox-value="${e}"]`),o=s.dataset.jetcheckboxText,n=s.classList.contains(this.activeClass),a=this.config.tags&&this.config.tagsTarget,r=this.valueObject[Object.keys(this.valueObject)[0]],l=r?r.length:1;e?"*"===e&&this.checkAll(t,i):this.uncheckAll(t),e&&"*"!==e&&(n?(s.classList.remove(this.activeClass),s.classList.remove(`${this.baseName}-item--active`),this.config.tags&&this.removeTags(t,o)):(!this.config.checkLimit||l<this.config.checkLimit)&&(s.classList.add(this.activeClass),s.classList.add(`${this.baseName}-item--active`),this.config.tags&&this.config.tagsOnChange&&this.addTags(t,o))),!this.config.label||this.config.tags&&!a||this.setLabel(t)})}clickTag(e){let t;this.valueObject={},this.storageCheck(),this.names.forEach((i,s)=>{this.valueObject[i]||(this.valueObject[i]=[]),t=this.config.name.constructor===Array?e[s]:e;const o=this.valueObject[i].indexOf(t);-1!==o&&this.valueObject[i].splice(o,1),this.storage.setItem(i,this.valueObject[i]),this.storage.getItem(i)||this.storage.removeItem(i)}),this.elements.forEach((t,i)=>{const s=t.querySelector(`[data-jetcheckbox-value="${e}"]`),o=s.dataset.jetcheckboxText,n=this.config.tags&&this.config.tagsTarget;s.classList.remove(this.activeClass),s.classList.remove(`${this.baseName}-item--active`),this.removeTags(t,o),this.config.tags&&!n||this.setLabel(t)}),this.config.onClickTag(e)}keyUp(e,t){const i=t.target.value;this.manageFilter(i,e),this.manageEmptyBtn(i,e),this.notFound(e),this.config.onKeyUp()}notFound(e){const t=this.elements[e].querySelector("ul"),i="jetcheckbox__option--hidden",s=t.querySelectorAll(`li.${i}:not(.jetcheckbox__option--uncheck-all):not(.jetcheckbox__option--check-all)`),o=t.querySelector(".jetcheckbox__option--uncheck-all"),n=t.querySelector(".jetcheckbox__option--check-all"),a=t.querySelector(".jetcheckbox__not-found");if(s.length>=this.optionsText.length){if(o&&o.classList.add(i),n&&n.classList.add(i),!a&&this.config.filterNotFound){let e=document.createElement("div");const i=document.createTextNode(this.config.filterNotFound);e.className="jetcheckbox__not-found",e.appendChild(i),t.appendChild(e)}}else o&&o.classList.remove(i),n&&n.classList.remove(i),a&&a.parentNode.removeChild(a)}destroy(){this.elements.forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})}init(){this.storageType(),this.config.sortBy[0]&&this.sort(this.config.sortBy),this.arrayLowerCase(this.optionsValue),this.elements.forEach((e,t)=>{e.classList.remove("jetcheckbox"),e.innerHTML="",this.titles=[],this.setBaseName(e),this.createCheckbox(e,t)});const e=this.names.some(e=>this.storage.getItem(e));e&&this.update()}}class JetFavorite{constructor(e){this.config=JetFavorite.extend(e),this.idParameter="cliente"===this.config.idType?"filtro.clienteid=":"filtro.parceriaid=",this.baseUrl=this.config.favoriteApi,this.baseUrlLogin=this.config.loginApi,this.baseUrlSearch=`${this.baseUrl}/pesquisar?${this.idParameter}${this.config.id}&pagina=1&maximo=999999`,this.baseUrlDeleteAll=`${this.baseUrl}/excluirtodos/${this.config.id}`,this.activeClass=`${this.config.favorite.substr(1)}--checked`,this.tokenStorage=`favorite-token-${this.config.id}`,this.userStorage=`favorite-user-${this.config.id}`,this.total=0,this.config.onInit(),this.init()}static extend(e){const t={form:"",pageLink:"",favorite:"",deleteAll:"",counter:"",loginApi:"https://casasoftautorizacao.azurewebsites.net/api/v1/Account/external/login/portal",favoriteApi:"https://portalapi.casasoftsig.com/api/v3/imoveisfavoritos",key:"1add169cbb1244d1aaadad282dc16425",idType:"cliente",id:"",onInit:()=>{},onLogin:()=>{},onNoLogin:()=>{},onClick:(e,t)=>{},onChange:e=>{},onAdd:()=>{},onRemove:()=>{},onRemoveAll:()=>{},onError:e=>{}};for(const i in e)t[i]=e[i];return t}loginSubmit(){const e="string"==typeof this.config.form?document.querySelectorAll(this.config.form):this.config.form;e.forEach(e=>{e.addEventListener("submit",t=>{t.preventDefault();const i=new FormData(e);i.get("nome")||i.append("nome",""),i.get("sobrenome")||i.append("sobrenome",""),i.get("telefone")||i.append("telefone",""),i.append("keySecret",this.config.key),"cliente"===this.config.idType?(i.append("clienteId",this.config.id),i.append("parceriaId","")):(i.append("clienteId",""),i.append("parceriaId",this.config.id)),i.append("moduloId",1),this.login(i)})})}login(e){fetch(this.baseUrlLogin,{method:"POST",headers:{"Content-Type":"application/json"},body:`{"email":"${e.get("email")}","firstName":"${e.get("nome")}","lastName":"${e.get("sobrenome")}","telephone":"${e.get("telefone")}","keySecret":"${this.config.key}","clienteId":"${e.clienteId}","parceriaId":"${e.parceriaId}","moduloId":"1"}`}).then(e=>{if(!e.ok)throw this.config.onError("login"),new Error(`JetFavorite: An error has occured trying to return the favorites login request 😭: ${e.status}`);return e.json()}).then(e=>{sessionStorage.setItem(this.tokenStorage,e.data.accessToken),sessionStorage.setItem(this.userStorage,e.data.userToken.email),this.get(),this.config.onLogin()}).catch(e=>console.log(e))}get(){sessionStorage.getItem(this.tokenStorage)&&fetch(`${this.baseUrlSearch}&filtro.email=${sessionStorage.getItem(this.userStorage)}`,{headers:{authorization:`bearer ${sessionStorage.getItem(this.tokenStorage)}`}}).then(e=>{if(!e.ok)throw this.config.onError("get"),new Error(`JetFavorite: An error has occured trying to return the favorites search request 😭: ${e.status}`);return e.json()}).then(e=>this.update(e)).catch(e=>console.log(e))}update(e){if(sessionStorage.getItem(this.tokenStorage)){this.total=e.data.total;const t=[],i=[];for(const s of e.data.resultado){let e;e=s.imovelVenda&&s.imovelLocacao?"a":s.imovelVenda&&!s.imovelLocacao?"v":s.imovelLocacao&&!s.imovelVenda?"l":"t",t.push(`${s.clienteId},${s.imovelId},${e}`),i.push(s.imovelFavoritoId)}this.checkButton(t,i),this.counter(e.data.total),this.action(),this.pageLink(),this.config.onChange(e)}}action(){if(this.actionElement){const e=JSON.parse(this.actionElement.dataset.jetfavorite);e?this.actionElement.classList.contains(this.activeClass)?this.delete(e):this.actionElement.classList.contains(this.activeClass)||this.add(e):this.deleteAll(),this.actionElement=null}}checkButton(e,t){const i="string"==typeof this.config.favorite?document.querySelectorAll(this.config.favorite):this.config.favorite;i.forEach(i=>{const s=JSON.parse(i.dataset.jetfavorite),o=`${s.clienteId},${s.imovelId},${s.imovelPara}`,n=e.indexOf(o);n>-1?(s.favoritoId=t[n],i.dataset.jetfavorite=JSON.stringify(s),i.classList.add(this.activeClass)):i.classList.contains(this.activeClass)&&(delete s.favoritoId,i.dataset.jetfavorite=JSON.stringify(s),i.classList.remove(this.activeClass))})}counter(e){const t="string"==typeof this.config.counter?document.querySelectorAll(this.config.counter):this.config.counter;t.forEach(t=>{t.innerHTML=e})}add(e){sessionStorage.getItem(this.tokenStorage)?fetch(this.baseUrl,{method:"POST",headers:{Authorization:`bearer ${sessionStorage.getItem(this.tokenStorage)}`,"Content-Type":"application/json"},body:`{"clienteId":"${e.clienteId}","imovelId":${e.imovelId},"imovelPara":"${e.imovelPara}"}`}).then(e=>{if(!e.ok)throw this.config.onError("add"),new Error(`JetFavorite: An error has occured trying to return the favorites add request 😭: ${e.status}`);return e.json()}).then(e=>{this.get(),this.config.onAdd()}).catch(e=>console.log(e)):this.config.onNoLogin()}delete(e){sessionStorage.getItem(this.tokenStorage)?fetch(`${this.baseUrl}/${e.favoritoId}`,{method:"DELETE",headers:{authorization:`bearer ${sessionStorage.getItem(this.tokenStorage)}`}}).then(e=>{if(!e.ok)throw this.config.onError("delete"),new Error(`JetFavorite: An error has occured trying to return the favorites delete request 😭: ${e.status}`);return e.json()}).then(e=>{this.get(),this.config.onRemove()}).catch(e=>console.log(e)):this.config.onNoLogin()}favoriteButtonEvent(){const e="string"==typeof this.config.favorite?document.querySelectorAll(this.config.favorite):this.config.favorite;e.forEach(e=>{e.addEventListener("click",this.favoriteButton.bind(this,e))})}favoriteButton(e){event.stopImmediatePropagation();const t=JSON.parse(e.dataset.jetfavorite);sessionStorage.getItem(this.tokenStorage)?e.classList.contains(this.activeClass)?this.delete(t):this.add(t):(this.actionElement=e,this.config.onNoLogin()),this.config.onClick(e,this.total)}deleteAll(){sessionStorage.getItem(this.tokenStorage)?fetch(this.baseUrlDeleteAll,{method:"DELETE",headers:{authorization:`bearer ${sessionStorage.getItem(this.tokenStorage)}`}}).then(e=>{if(!e.ok)throw this.config.onError("deleteAll"),new Error(`JetFavorite: An error has occured trying to return the favorites delete all request 😭: ${e.status}`);return e.json()}).then(e=>{this.get(),this.config.onRemoveAll()}).catch(e=>console.log(e)):this.config.onNoLogin()}deleteAllEvent(){const e="string"==typeof this.config.deleteAll?document.querySelectorAll(this.config.deleteAll):this.config.deleteAll;e.forEach(e=>{e.addEventListener("click",t=>{t.stopImmediatePropagation(),sessionStorage.getItem(this.tokenStorage)||(this.actionElement=e),this.deleteAll()})})}pageLink(){if(this.config.pageLink){const e=document.querySelectorAll(this.config.pageLink),t=sessionStorage.getItem(this.userStorage);e.forEach(e=>{if(t&&!e.href.includes("user=")){let i=e.href.replace(/^.*\/\/[^\/]+/,"");i=`${i}?user=${t}`,e.href=i}})}}init(){this.loginSubmit(),this.favoriteButtonEvent(),this.deleteAllEvent(),this.get()}}class JetInput{constructor(e){this.config=JetInput.extend(e),this.elements=document.querySelectorAll(this.config.element),this.names="string"==typeof this.config.name?[this.config.name]:this.config.name,this.optionsText=this.config.optionsText,this.optionsValue=this.config.optionsValue,this.optionsCounter=this.config.counter,this.activeClass="jetinput__item--active",this.valueObject={},this.labelObject={},this.sortMap={},this.selectedOptions=[],this.tabIndex=null,this.baseName,this.titles,this.storage,this.init(),this.config.onInit()}static extend(e){const t={element:"",name:"",type:"",autocomplete:!1,selectionLimit:"",optionsText:[],optionsValue:[],counter:[],deselectAll:"",selectAll:"",inputType:"text",placeholder:"Digite para filtrar",value:"",update:!1,empty:!0,min:0,max:Number,maxlength:Number,step:1,pattern:"",closeOnBlur:!0,sortBy:[],sortOrder:"ascending",sortTitle:!1,sortTotal:!1,tags:!1,tagsOnChange:!0,tagsTarget:"",filter:!1,sumButton:!1,sumButtonLabel:"",reduceButton:!1,reduceButtonLabel:"",validateOperator:"",validateTarget:"",storeOnKeyUp:!0,storage:"session",onInit:()=>{},onOpen:()=>{},onClose:()=>{},onChange:e=>{},onDeselectAll:()=>{},onSelectAll:()=>{},onKeyUp:e=>{},onKeyDown:e=>{},onKeyEnter:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onClickTag:e=>{},onEmpty:()=>{},onValidateError:()=>{},onLimit:()=>{}};for(const i in e)t[i]=e[i];return t}arrayLowerCase(e){e.forEach((t,i)=>{Array.isArray(t)?t.forEach((e,i)=>{isNaN(e)&&(t[i]=e.toLowerCase())}):isNaN(t)&&(e[i]=t.toLowerCase())})}setBaseName(e){const t=e.getAttribute("class"),i=this.config.element.split(",");i.forEach(i=>{i=i.trim().substr(1),t.indexOf(i)>-1&&(e.dataset.jetinputName=i)}),this.baseName=e.dataset.jetinputName}storageType(){"local"===this.config.storage?this.storage=localStorage:this.storage=sessionStorage}storageCheck(){this.names.forEach(e=>{if(this.storage.getItem(e)){const t=this.storage.getItem(e),i=t.split(",");this.valueObject[e]||(this.valueObject[e]=[]),i.forEach(t=>{t=t.toString().toLowerCase(),this.valueObject[e].push(t)})}})}update(){this.storageCheck(),this.elements.forEach((e,t)=>{this.updateSelect(e),this.config.tags&&this.updateTags(e,t)})}updateTags(e,t){let i,s=document.createDocumentFragment();i=this.config.tagsTarget?document.querySelectorAll(this.config.tagsTarget):e.querySelectorAll(".jetinput"),i.forEach(e=>{for(const o in this.labelObject)console.log(this.labelObject),this.labelObject[o].forEach(o=>{const n=`[data-jetinput-id="${this.config.name}"][data-jetinput-label="${o}"]`,a=e.querySelector(n);let r;if(this.config.autocomplete){const e=document.querySelector(`.${this.baseName}-item[data-jetinput-text="${o}"]`);r=e.dataset.jetinputValue.split(",")}else r=o;if(this.config.tagsTarget||(i[0].innerHTML=""),!a){const e=this.createTag(o,r,t);s.appendChild(e)}});e.appendChild(s)})}addTags(e,t,i){let s,o=document.createDocumentFragment();this.config.tagsTarget?s=document.querySelectorAll(this.config.tagsTarget):(s=e.querySelectorAll(".jetinput"),s[0].querySelector(".jetinput__tag")||(s[0].innerHTML="")),s.forEach(s=>{const n=`[data-jetinput-id="${this.config.name}"][data-jetinput-label="${t}"]`,a=s.querySelector(n),r=e.querySelector(`[data-jetinput-text="${t}"]`),l=r.dataset.jetinputValue.split(",");if(!a){const e=this.createTag(t,l,i);o.appendChild(e),s.appendChild(o)}})}removeTags(e,t){let i;i=this.config.tagsTarget?document.querySelectorAll(this.config.tagsTarget):e.querySelectorAll(".jetinput"),i.forEach(e=>{const i=e.querySelector(`[data-jetinput-label="${t}"]`);i&&i.parentNode.removeChild(i),this.config.tagsTarget||e.querySelector(".jetinput__tag")||(e.innerHTML=this.config.label)})}createTag(e,t,i){let s=document.createElement("span"),o=document.createElement("span"),n=document.createElement("span");return"multiple"===this.config.type?this.config.name.constructor!==Array&&(t=t.toString()):t="",s.addEventListener("click",()=>{this.config.filter&&this.config.autocomplete&&this.manageFilter("",i),this.clickEvent(t,i),this.config.onClickTag(t)}),n.className=`${this.baseName}-delete-btn jetinput__delete-btn`,o.className=`${this.baseName}-tag-text jetinput__tag-text`,s.className=`${this.baseName}-tag jetinput__tag`,s.dataset.jetinputId=this.config.name,s.dataset.jetinputLabel=e,o.innerHTML=e,s.appendChild(o),s.appendChild(n),s}setLabel(e){const t=e.querySelectorAll(`.${this.activeClass}`),i=e.querySelector("input"),s=this.config.name;let o=[];this.labelObject[s]||(this.labelObject[s]=[]),this.config.autocomplete?t.forEach(e=>{const t=e.dataset.jetinputText,i=this.labelObject[s].indexOf(t);o.push(t),-1===i&&this.labelObject[s].push(t)}):this.labelObject[s].push(this.storage.getItem(s)),o[0]?i.innerHTML=o.join(", "):i.innerHTML=""}updateSelect(e){let t={};for(const e in this.valueObject)this.valueObject[e].forEach((e,i)=>{t[i]||(t[i]=[]),t[i].push(e)});for(const i in t){const s=t[i],o=e.querySelector(`[data-jetinput-value="${s}"]`);o&&(o.classList.add(this.activeClass),o.classList.add(`${this.baseName}-item--active`))}this.setLabel(e)}createSelect(e,t){let i=document.createDocumentFragment(),s=document.createElement("ul");s.className=`${this.baseName}-list jetinput__list`,this.createList({element:e,list:s,text:this.optionsText,value:this.optionsValue,counter:this.optionsCounter,addIndex:0,index:t}),window.addEventListener("click",e=>{this.clickInside(t,e)}),i.appendChild(s),e.appendChild(i),this.createTotal(e)}createList(e){const t=e.element.querySelector(".jetinput__option--deselect-all"),i=e.element.querySelector(".jetinput__option--deselect-all");!t&&this.config.deselectAll&&this.createOption({element:e.element,list:e.list,itemClass:" jetinput__option--deselect-all",btnClass:" jetinput__item--deselect-all",text:this.config.deselectAll,value:"",addIndex:e.addIndex,index:e.index}),!i&&this.config.selectAll&&"multiple"===this.config.type&&this.createOption({element:e.element,list:e.list,itemClass:" jetinput__option--select-all",btnClass:" jetinput__item--select-all",text:this.config.selectAll,value:"*",addIndex:e.addIndex,index:e.index}),e.text.forEach((t,i)=>{this.config.sortTitle&&this.createTitle({list:e.list,text:this.sortMap[i]}),this.createOption({element:e.element,list:e.list,itemClass:"",btnClass:"",text:t,value:this.optionsValue[i],counter:this.optionsCounter,optionIndex:i,addIndex:e.addIndex,index:e.index})})}createTitle(e){if(-1===this.titles.indexOf(e.text)){let t=document.createElement("ul"),i=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");this.titles.push(e.text),t.className=`${this.baseName}-group jetinput__group`,i.className=`${this.baseName}-title jetinput__title`,s.className=`${this.baseName}-name jetinput__name`,o.className=`${this.baseName}-total jetinput__total`,t.dataset.jetinputTitle=e.text,s.innerHTML=e.text,i.appendChild(s),i.appendChild(o),t.appendChild(i),e.list.appendChild(t)}}createTotal(e){if(this.config.sortTitle&&this.config.sortTotal){const t=e.querySelectorAll(".jetinput__group");t.forEach(e=>{let t=e.querySelector(".jetinput__total");const i=e.querySelectorAll("li");let s=0;i.forEach(e=>{if(this.optionsCounter&&this.optionsCounter.length){const t=e.querySelector(".jetinput__counter");s=Number(t.innerHTML)}else s=i.length}),t.innerHTML=s})}}createOption(e){let t=document.createElement("li"),i=document.createElement("a"),s=document.createElement("span");const o=e.list.querySelector(`[data-jetinput-title="${this.sortMap[e.optionIndex]}"]`);if(t.className=`${this.baseName}-option jetinput__option${e.itemClass}`,i.className=`${this.baseName}-item jetinput__item${e.btnClass}`,s.className=`${this.baseName}-text jetinput__text`,i.dataset.jetinputText=e.text,i.dataset.jetinputValue=e.value,s.innerHTML=e.text,i.appendChild(s),t.appendChild(i),o?(o.appendChild(t),this.addAtIndex(o,t,e.addIndex)):(e.list.appendChild(t),this.addAtIndex(e.list,t,e.addIndex)),"multiple"===this.config.type){let e=document.createElement("span");e.className=`${this.baseName}-checkbox jetinput__checkbox`,i.insertBefore(e,s)}if(e.counter&&e.counter.length&&e.counter[e.optionIndex]){let t=document.createElement("span");t.className=`${this.baseName}-counter jetinput__counter`,t.innerHTML=e.counter[e.optionIndex],i.appendChild(t)}i.addEventListener("click",()=>{this.clickEvent(e.value,e.index)}),i.addEventListener("mouseover",t=>{const i=e.list.querySelector(".jetinput__item--focused");this.tabIndex=e.optionIndex,i&&this.removeFocus(i),this.addFocus(t.target.parentElement)})}addAtIndex(e,t,i){const s=e.children.length;i||(i=s),i>=e.children.length?e.appendChild(t):e.insertBefore(t,e.children[i])}add(e){this.optionsText=e.text,this.optionsValue=e.value,this.optionsCounter=e.counter,this.tabIndex=null,this.arrayLowerCase(this.optionsValue),e.sort&&(this.titles=[],this.sort(e.sort)),this.elements.forEach((t,i)=>{const s=t.querySelector("input"),o=t.querySelector("ul");this.optionsText.toString()?t.classList.remove("jetinput--disabled"):t.classList.add("jetinput--disabled"),this.createList({element:t,list:o,text:this.optionsText,value:this.optionsValue,counter:this.optionsCounter,addIndex:e.addIndex,index:i}),this.createTotal(t),s===document.activeElement&&this.open(i)})}remove(e){this.elements.forEach(t=>{const i=t.querySelector("ul");e?e.forEach(e=>{const t=i.querySelector(`[data-jetinput-text="${e}"]`),s=t.dataset.jetinputValue,o=this.optionsText.indexOf(e),n=this.optionsValue.indexOf(s);-1!==o&&(this.optionsText.splice(o,1),this.optionsValue.splice(n,1),t.parentNode.removeChild(t))}):(this.valueObject={},this.labelObject={},this.sortMap={},this.optionsText=[],this.optionsValue=[],i&&(i.innerHTML=""))})}sum(){const e=this.config.min,t=this.config.max,i=this.config.step;let s;this.elements.forEach((o,n)=>{const a=o.querySelector("input"),r=o.querySelector(".jetinput__empty-btn");s=parseInt(a.value,10),s=isNaN(s)?e:s,isNaN(t)?s++:(s=Number(s)+Number(i),s>=t&&(s=t)),r&&(r.style.display="block"),a.value=s}),this.removeStorage(),this.setStorage(s),this.config.onChange(s),this.config.update&&this.update()}reduce(){const e=this.config.min,t=this.config.step;let i;this.elements.forEach((s,o)=>{const n=s.querySelector("input"),a=s.querySelector(".jetinput__empty-btn");i=parseInt(n.value,10),i=isNaN(i)?e:i,isNaN(e)?i--:(i=Number(i)-Number(t),i<=e&&(i=e)),a&&(a.style.display="block"),n.value=i}),this.removeStorage(),this.setStorage(i),this.config.onChange(i),this.config.update&&this.update()}createSearchInput(e,t){let i=document.createDocumentFragment();const s=document.createElement("div"),o=document.createElement("input");s.className=`${this.baseName}-filter jetinput__filter`,o.className=`${this.baseName}-input jetinput__input`,o.placeholder=this.config.placeholder,o.type=this.config.inputType,""!==this.config.value&&(o.value=this.config.value),isNaN(this.config.min)||(o.min=this.config.min),isNaN(this.config.max)||(o.max=this.config.max),isNaN(this.config.maxlength)||(o.maxLength=this.config.maxlength),isNaN(this.config.step)||(o.step=this.config.step),o.addEventListener("paste",e=>{this.paste(t,e)}),o.addEventListener("focus",()=>{this.focus(t)}),o.addEventListener("blur",()=>{this.config.onBlur()}),o.addEventListener("keyup",e=>{this.keyUp(t,e)}),o.addEventListener("keydown",e=>{this.keyDown(t,e)}),s.appendChild(o),this.config.empty&&s.appendChild(this.emptyBtn(o,t)),i.appendChild(s),this.config.reduceButton&&i.appendChild(this.reduceBtn()),this.config.sumButton&&i.appendChild(this.sumBtn()),e.appendChild(i),e.classList.add("jetinput")}empty(){this.elements.forEach((e,t)=>{const i=e.querySelector("input");i.value="",this.config.autocomplete&&(this.close(t),this.config.filter?this.manageFilter("",t):this.remove()),this.config.empty&&this.manageEmptyBtn("",t),this.config.storeOnKeyUp&&this.removeStorage()}),this.config.onEmpty()}emptyBtn(e,t){let i=document.createElement("a");return i.className=`${this.baseName}-empty-btn jetinput__empty-btn`,i.addEventListener("click",this.empty.bind(this)),i}manageEmptyBtn(e,t){const i=this.elements[t].querySelector(".jetinput__empty-btn");i&&(i.style.display=e?"block":"none")}sumBtn(){let e=document.createElement("div");return e.className=`${this.baseName}-sum-btn jetinput__sum-btn`,this.config.sumButtonLabel&&(e.innerText=this.config.sumButtonLabel),e.addEventListener("click",this.sum.bind(this)),e}reduceBtn(){let e=document.createElement("div");return e.className=`${this.baseName}-reduce-btn jetinput__reduce-btn`,this.config.reduceButtonLabel&&(e.innerText=this.config.reduceButtonLabel),e.addEventListener("click",this.reduce.bind(this)),e}clickInside(e,t){const i=this.elements[e].contains(t.target),s=this.elements[e].classList.contains("jetinput--opened");s&&!i&&this.config.closeOnBlur&&this.close(e)}open(e){const t=this.elements[e].querySelector("ul");this.elements[e].classList.add("jetinput--opened"),t.classList.add("jetinput__list--opened"),this.config.onOpen()}close(e){if(this.config.autocomplete){const t=this.elements[e].querySelector("ul"),i=t.querySelector(".jetinput__item--focused");i&&(this.removeFocus(i),this.tabIndex=null),this.elements[e].classList.remove("jetinput--opened"),t.classList.remove("jetinput__list--opened"),t.classList.remove("jetinput__list--opened-top")}this.config.onClose()}setStorage(e){let t;this.valueObject={},this.storageCheck(),this.names.forEach((i,s)=>{this.valueObject[i]||(this.valueObject[i]=[]),t=this.config.name.constructor===Array?e[s]:e;const o=this.valueObject[i].indexOf(t);-1===o?this.config.selectionLimit&&this.config.selectionLimit<=this.valueObject[i].length?this.config.onLimit():this.valueObject[i].push(t):this.valueObject[i].splice(o,1),this.valueObject[i][0]?this.storage.setItem(i,this.valueObject[i]):this.storage.removeItem(i)})}removeStorage(){this.names.forEach(e=>{this.valueObject[e]=[],this.storage.removeItem(e)})}validateNumber(e){const t=this.storage.getItem(this.config.validateTarget),i="<"===this.config.validateOperator&&t>e,s=">"===this.config.validateOperator&&t<e;if(null===t||i||s)return!0}clickEvent(e,t){if(!e||this.validateNumber(e)){const i=this.elements[t].querySelector("input");this.selectOption(e),e&&"*"!==e&&this.setStorage(e),"multiple"===this.config.type&&e&&"*"!==e||this.close(t),this.config.empty&&this.manageEmptyBtn(i.value,t),e||this.config.onDeselectAll(),"*"===e&&this.config.onSelectAll(),this.config.onChange(this.valueObject)}else this.config.onValidateError()}checkAll(e,t){const i=this.config.tags&&this.config.tagsTarget;this.optionsValue.forEach((i,s)=>{if(!this.config.selectionLimit||s<this.config.selectionLimit){const s=e.querySelector(`[data-jetinput-value="${i}"]`),o=s.dataset.jetinputText;s.classList.contains(this.activeClass)&&option.selected||(s.classList.add(this.activeClass),s.classList.add(`${this.baseName}-item--active`),this.config.tags&&this.addTags(e,o,t),0===t&&this.setStorage(i))}}),this.config.tags&&!i||this.setLabel(e)}uncheckAll(e){const t=this.config.tags&&this.config.tagsTarget;this.optionsValue.forEach(t=>{const i=e.querySelector(`[data-jetinput-value="${t}"]`);let s;i&&(s=i.dataset.jetinputText,i.classList.remove(this.activeClass),i.classList.remove(`${this.baseName}-item--active`),this.config.tags&&this.removeTags(e,s))}),this.removeStorage(),this.config.tags&&!t||this.setLabel(e)}sort(e){this.sortMap=e.map((e,t)=>({index:t,value:e})),this.sortMap.sort((e,t)=>isNaN(e.value)&&isNaN(t.value)?+(e.value>t.value)||+(e.value===t.value)-1:e.value-t.value),this.optionsText=this.sortMap.map(e=>this.optionsText[e.index]),this.optionsValue=this.sortMap.map(e=>this.optionsValue[e.index]),this.optionsCounter&&this.optionsCounter.length&&(this.optionsCounter=this.sortMap.map(e=>this.optionsCounter[e.index])),this.sortMap=this.sortMap.map(e=>e[Object.keys(e)[1]]),"descending"===this.config.sortOrder&&(this.optionsText.reverse(),this.optionsValue.reverse(),this.optionsCounter.reverse(),this.sortMap.reverse())}filter(e,t){const i=t.split(" ");let s,o;for(let t=0;o=i[t++];){if(s=new RegExp(o,"ig"),!s.test(e))return!1;e=e.replace(s,"")}return!0}manageFilter(e,t){const i=this.elements[t].querySelectorAll("li:not(.jetinput__option--deselect-all):not(.jetinput__option--select-all)"),s="jetinput__option--hidden";i.forEach((i,o)=>{const n=this.elements[t].querySelector(`[data-jetinput-title="${this.sortMap[o]}"]`);let a;if(n&&(a=n.querySelectorAll("li")),e){const t=i.querySelector("a");let o=t.innerHTML;if(this.filter(o,e))i.classList.remove(s),n&&a[0]&&n.classList.remove(s);else if(i.classList.add(s),n){const e=n.querySelectorAll(`li.${s}`);a.length===e.length&&n.classList.add(s)}}else i.classList.remove(s),n&&n.classList.remove(s)})}selectOption(e){this.elements.forEach((t,i)=>{let s,o,n;e&&(s=t.querySelector(`[data-jetinput-value="${e}"]`),o=s.dataset.jetinputText,
n=s.classList.contains(this.activeClass)&&"multiple"===this.config.type);const a=this.config.tags&&this.config.tagsTarget,r=this.valueObject[Object.keys(this.valueObject)[0]],l=r?r.length:1;"multiple"===this.config.type&&e?"*"===e&&this.checkAll(t,i):this.uncheckAll(t),e&&"*"!==e&&(n?(s.classList.remove(this.activeClass),s.classList.remove(`${this.baseName}-item--active`),this.config.tags&&this.removeTags(t,o)):(!this.config.selectionLimit||l<this.config.selectionLimit)&&(s.classList.add(this.activeClass),s.classList.add(`${this.baseName}-item--active`),this.config.tags&&this.config.tagsOnChange&&this.addTags(t,o,i))),this.config.tags&&!a||this.setLabel(t)})}paste(e,t){setTimeout(()=>{const e=t.target.value;this.setStorage(e),this.config.onPaste()})}focus(e){this.config.autocomplete&&this.optionsText[0]&&this.open(e),this.config.onFocus()}keyUp(e,t){const i=this.elements[e].querySelector("input"),s=t.target.value;38!==t.keyCode&&40!==t.keyCode&&13!==t.keyCode&&17!==t.keyCode&&(this.manageEmptyBtn(s,e),this.removeStorage()),(8===t.keyCode||32===t.keyCode||46===t.keyCode||t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90||t.keyCode>=96&&t.keyCode<=105||t.keyCode>=187&&t.keyCode<=190||229===t.keyCode)&&(!this.config.pattern||this.config.pattern&&this.pattern(s,this.config.pattern)?(s&&this.config.storeOnKeyUp&&(this.setStorage(s),this.config.onChange(s)),this.config.filter&&this.config.autocomplete&&this.manageFilter(s,e),this.config.onKeyUp(s)):i.value=this.removeLastDigit(s))}keyDown(e,t){let i,s=t.target.value;if(this.config.autocomplete){const s=this.elements[e].querySelector("ul"),o=s.offsetHeight;i=s.querySelectorAll("li"),38===t.keyCode&&(t.preventDefault(),this.keyUpList(i,s,o)),40===t.keyCode&&(t.preventDefault(),this.keyDownList(i,s,o))}13===t.keyCode&&(this.config.autocomplete?this.keyEnterList(i):this.keyEnterList()),this.config.onKeyDown(s)}keyUpList(e,t){this.removeFocus(e[this.tabIndex]),this.tabIndex>0?this.tabIndex--:this.tabIndex=e.length-1,this.addFocus(e[this.tabIndex]),this.scrollUp(e,t)}keyDownList(e,t,i){this.removeFocus(e[this.tabIndex]),null===this.tabIndex||this.tabIndex===e.length-1?this.tabIndex=0:this.tabIndex++,this.addFocus(e[this.tabIndex]),this.scrollDown(e,t,i)}keyEnterList(e){this.tabIndex&&e[this.tabIndex].querySelector("a").click(),this.config.onKeyEnter()}scrollUp(e,t){var i=e[this.tabIndex].offsetTop;t.scrollTop>=i?t.scrollTop=i:this.tabIndex===e.length-1&&(t.scrollTop=t.scrollHeight)}scrollDown(e,t,i){const s=e[this.tabIndex].offsetTop,o=e[this.tabIndex].offsetHeight,n=s-i+o;t.scrollTop<=n?t.scrollTop=n:s<t.scrollTop?t.scrollTop=s:0===this.selectedOptions&&(t.scrollTop=0)}addFocus(e){e.classList.add(`${this.baseName}-item--focused`),e.classList.add("jetinput__item--focused")}removeFocus(e){e&&(e.classList.remove(`${this.baseName}-item--focused`),e.classList.remove("jetinput__item--focused"))}pattern(e,t){return t.test(e)}removeLastDigit(e){return e.substr(0,e.length-1)}notFound(e){const t=this.elements[e].querySelector("ul"),i="jetinput__option--hidden",s=t.querySelectorAll(`li.${i}:not(.jetinput__option--deselect-all):not(.jetinput__option--select-all)`),o=t.querySelector(".jetinput__option--deselect-all"),n=t.querySelector(".jetinput__option--select-all"),a=t.querySelector(".jetinput__not-found");if(s.length>=this.optionsText.length){if(o&&o.classList.add(i),n&&n.classList.add(i),!a&&this.config.filterNotFound){let e=document.createElement("div");const i=document.createTextNode(this.config.filterNotFound);e.className="jetinput__not-found",e.appendChild(i),t.appendChild(e)}}else o&&o.classList.remove(i),n&&n.classList.remove(i),a&&a.parentNode.removeChild(a),this.open(e)}destroy(){this.elements.forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})}init(){this.storageType(),this.config.sortBy[0]&&this.sort(this.config.sortBy),this.arrayLowerCase(this.optionsValue),this.elements.forEach((e,t)=>{e.classList.remove("jetinput"),e.classList.remove("jetinput--opened"),e.tabIndex="0",e.innerHTML="",this.titles=[],this.setBaseName(e),this.createSearchInput(e,t),this.config.autocomplete&&this.createSelect(e,t)}),this.storage.getItem(this.names[0])&&this.update()}}class JetLoader{constructor(e){this.config=JetLoader.extend(e),this.controller=new AbortController,this.signal=this.controller.signal,this.init()}static extend(e){const t={url:"",method:void 0,referrer:void 0,mode:void 0,redirect:void 0,credentials:void 0,integrity:void 0,header:{},cache:void 0,body:void 0,onInit:()=>{},onProgress:e=>{},onSuccess:e=>{},onError:e=>{},onAbort:()=>{}};for(const i in e)t[i]=e[i];return t}load(e){const t=this.controller.signal;fetch(e,{method:this.config.method,referrer:this.config.referrer,redirect:this.config.redirect,headers:new Headers(this.config.header),mode:this.config.mode,credentials:this.config.credentials,integrity:this.config.integrity,cache:this.config.cache,body:this.config.body,signal:t}).then(this.handleErrors.bind(this)).catch(e=>this.config.onError(e.status))}handleErrors(e){return e.ok?this.getResponse(e):Promise.reject(e)}getResponse(e){let t=e.headers.get("content-type");if(t.includes("application/json"))this.getJson(e);else if(t.includes("text/html"))this.getText(e);else{if(!t.includes("application/octet-stream")&&!t.includes("application/pdf"))throw new Error(`JetLoader Error 😭 - Sorry, content-type ${t} not supported`);this.getBlob(e)}}getJson(e){return e.json().then(t=>{e.ok&&this.config.onSuccess(t)})}getText(e){return e.text().then(t=>{e.ok&&this.config.onSuccess(t)})}getBlob(e){return e.blob().then(t=>{e.ok&&this.config.onSuccess(t)})}abort(){this.controller.abort(),this.config.onAbort()}init(){this.config.onInit(),this.load(this.config.url)}}class JetPagination{constructor(e){this.config=JetPagination.extend(e),this.container=this.config.container?"string"==typeof this.config.container?document.querySelector(this.config.container):this.config.container:"",this.previous=this.config.previous?"string"==typeof this.config.previous?document.querySelector(this.config.previous):this.config.previous:"",this.next=this.config.next?"string"==typeof this.config.next?document.querySelector(this.config.next):this.config.next:"",this.first=this.config.first?"string"==typeof this.config.first?document.querySelector(this.config.first):this.config.first:"",this.last=this.config.last?"string"==typeof this.config.last?document.querySelector(this.config.last):this.config.last:"",this.active=this.config.active?Number(this.config.active):1,this.total=Number(this.config.total),this.baseClass="jetpagination__",this.itemClass=`${this.baseClass}item`,this.buttonClass=`${this.baseClass}btn`,this.init(),this.config.onInit()}static extend(e){const t={container:"",previous:"",next:"",first:"",last:"",active:1,start:0,left:4,right:4,end:0,gap:[],total:"",link:!0,linkTarget:"",baseUrl:`${location.pathname}${location.search}`,parameter:"pagina",parameterType:"normal",concatenateWith:"-",joinWith:"-",onInit:()=>{},onChange:e=>{},onComplete:()=>{}};for(const i in e)t[i]=e[i];return t}createPagesArray(e,t){return this.range(t).reduce((i,s)=>{const o=s+1,n=o<=this.start;let a=o>=e-this.left&&o<=e+this.right;const r=o>=t-this.end+1,l=i[i.length-1]!==this.gap;let c;return e<=this.left+1?a=o>=1&&o<=1+this.left+this.right:e>=t-this.right&&(a=o>=t-(this.left+this.right)&&o<=t),c=n||a||r?o:l?this.gap:[],i.concat(c)},[])}range(e){return Array.apply(null,Array(e)).map((e,t)=>t)}createElement(e,t,i,s){const o=document.createElement(e);return o.className=i,s&&(o.innerHTML=s),t.appendChild(o),o}createPages(e){const t=this.createPagesArray(this.active,this.total),i=this.config.container.slice(1),s=`${i}-item`,o=`${i}-btn`;let n,a;e.innerHTML="",t.forEach(t=>{t!==this.gap?(a=this.createElement("li",e,`${this.itemClass} ${s}`),n=this.createElement("a",a,`${this.buttonClass} ${o}`,t),t===this.active?(a.classList.add(`${this.itemClass}--active`,`${s}--active`),n.classList.add(`${this.buttonClass}--active`,`${o}--active`)):this.config.link?this.setLink(n,t):n.addEventListener("click",this.gotoPage.bind(this,t))):a=this.createElement("li",e,`${this.baseClass}gap ${i}-gap`,this.gap)}),this.config.onComplete()}gotoPage(e){this.active=Number(e),this.container&&this.checkBreakpoints(),this.checkButton(),this.config.onChange(e)}prevPage(e){this.active--,this.config.link?this.setLink(e,this.active):this.gotoPage(this.active)}nextPage(e){this.active++,this.config.link?this.setLink(e,this.active+1):this.gotoPage(this.active)}firstPage(e){this.config.link?this.setLink(e,1):(this.active=1,this.gotoPage(this.active))}lastPage(e){this.config.link?this.setLink(e,this.total):(this.active=this.total,this.gotoPage(this.active))}cleanBaseUrl(){const e=this.config.parameter,t=this.config.concatenateWith;let i=this.config.baseUrl;if(i.includes(e)){const s=i.split(`${t}${e}`)[0];if(i.includes("?")){const e=i.split("?"),o=e[0],n=e[1];i="query"===this.config.parameterType?n.includes(t)?s:o:`${s}?${n}`}else i=s}return i}setLink(e,t){const i=this.cleanBaseUrl();if(t>1){const s=`${this.config.parameter}${this.config.joinWith}${t}`,o=`${this.config.concatenateWith}${s}`;if(i.includes("?"))if("query"===this.config.parameterType)e.href=`${i}${o}`;else{const t=i.split("?");e.href=`${t[0]}${o}?${t[1]}`}else"query"===this.config.parameterType?e.href=`${i}?${s}`:e.href=`${i}${o}`}else e.href=i;this.config.linkTarget&&(e.target=this.config.linkTarget)}buttonEvents(){const e=[this.previous,this.next,this.first,this.last],t=[this.prevPage,this.nextPage,this.firstPage,this.lastPage];e.forEach((e,i)=>{e&&(this.config.link?t[i].call(this,e):e.addEventListener("click",t[i].bind(this)))})}buttonState(e,t,i,s){if(t){const o=`${this.baseClass}${s}--disabled`,n=`${i.slice(1)}--disabled`;e?t.classList.remove(o,n):(t.classList.add(o,n),this.config.link&&t.removeAttribute("href"))}}checkButton(){const e=1!==this.active,t=1!==this.active,i=this.active!==this.total,s=this.active!==this.total;this.buttonState(e,this.first,this.config.first,"first"),this.buttonState(t,this.previous,this.config.previous,"previous"),this.buttonState(i,this.next,this.config.next,"next"),this.buttonState(s,this.last,this.config.last,"last")}checkBreakpoints(){this.start=this.config.start,this.left=this.config.left,this.right=this.config.right,this.end=this.config.end,this.gap=this.config.gap;const e=[this.start,this.end,this.left,this.right,this.gap],t=window.innerWidth;e.forEach(e=>{for(const i in e)t>=Number(i)&&(e===this.config.start?this.start=this.config.start[i]:e===this.config.end?this.end=this.config.end[i]:e===this.config.left?this.left=this.config.left[i]:e===this.config.right?this.right=this.config.right[i]:"object"==typeof this.config.gap&&(this.gap=this.config.gap[i]))}),this.createPages(this.container)}addClasses(){const e=[this.container,this.previous,this.next,this.first,this.last],t=["list","previous","next","first","last"];e.forEach((e,i)=>{e&&e.classList.add(`${this.baseClass}${t[i]}`)})}destroy(){const e=[this.previous,this.next,this.first,this.last];this.container.innerHTML="",e.forEach(e=>{const t=e.cloneNode(!0),i=e.parentNode;i.replaceChild(t,e)})}init(){this.container&&(window.addEventListener("resize",this.checkBreakpoints.bind(this)),this.checkBreakpoints()),this.buttonEvents(),this.checkButton(),this.addClasses()}}class JetRouter{constructor(e){this.config=JetRouter.extend(e),this.decode=decodeURIComponent,this.routes={},this.init(),this.config.onInit()}static extend(e){const t={link:"a[href]",routes:{},notFound:()=>{},onInit:()=>{},onClick:(e,t)=>{},onHash:e=>{}};for(const i in e)t[i]=e[i];return t}cleanUp(e){return~e.indexOf("/?")&&(e=e.replace("/?","?")),"/"==e[0]&&(e=e.slice(1)),"/"==e[e.length-1]&&(e=e.slice(0,-1)),e}recurseUrl(e,t,i,s,o){if(!s)return;if(i>=e.length){const e=s["@"];return e&&{cb:e,params:o.reduce((e,t)=>(e[t[0]]=t[1],e),{})}}const n=t(e[i]),a=o.length;return this.recurseUrl(e,t,i+1,s[n.toLowerCase()],o)||this.recurseNamedUrl(e,t,i+1,s,":",n,o,a)||this.recurseNamedUrl(e,t,e.length,s,"*",e.slice(i).join("/"),o,a)}recurseNamedUrl(e,t,i,s,o,n,a,r){a.length=r;const l=s[o];return l&&a.push([l["~"],n]),this.recurseUrl(e,t,i,l,a)}processQuery(e,t,i){if(e&&t.cb){const s=e.indexOf("#"),o=(s<0?e:e.slice(0,s)).split("&");for(let e=0;e<o.length;++e){const s=o[e].split("=");t.params[s[0]]=i(s[1])}}return t}noResult(e){return e}lookup(e){let t=this.cleanUp(e).split("?");const i=~e.indexOf("%")?this.decode:this.noResult;return t[0].includes("#")&&(t=t[0].split("#")[0],"/"===t.slice(-1)&&(t=t.slice(0,-1)),t=[t]),this.processQuery(t[1],this.recurseUrl(t[0].split("/"),i,0,this.routes,[])||{},i)}add(e,t){let i=e.split("/"),s=this.routes;for(let t=+("/"===e[0]);t<i.length;++t){let e=i[t];const o=":"==e[0]?":":"*"==e[0]?"*":e.toLowerCase();s=s[o]||(s[o]={}),(":"==o||"*"==o)&&(s["~"]=e.slice(1))}s["@"]=t}listen(e,t){const i=this.lookup(e);return(i.cb||this.config.notFound)(e,t,i.params)}findLinks(){return document.querySelectorAll(this.config.link)}updateLinks(){"undefined"!=typeof document&&this.findLinks().forEach(e=>{const t=!e.target,i=!e.hasAttribute("data-jetrouter-disabled"),s=!e.hasAttribute("download"),o=e.href.includes(":")&&!e.href.includes("http");!e.hasListener&&t&&i&&s&&!o&&(e.addEventListener("click",t=>{t.preventDefault(),t.stopImmediatePropagation();const i=e.getAttribute("href");t.ctrlKey?window.open(e,"_blank"):(this.config.onClick(this,i),this.listen(i))}),e.hasListener=!0)})}hash(){history.pushState=(e=>(function(){const t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushState")),window.dispatchEvent(new Event("locationchange")),t}))(history.pushState),history.replaceState=(e=>(function(){const t=e.apply(this,arguments);return window.dispatchEvent(new Event("replaceState")),window.dispatchEvent(new Event("locationchange")),t}))(history.replaceState),this.hashEvent()}hashEvent(){window.addEventListener("locationchange",()=>{const e=location.hash;e&&setTimeout(()=>this.config.onHash(e),250)}),window.dispatchEvent(new Event("locationchange"))}init(){for(const e in this.config.routes)this.add(e,this.config.routes[e]);this.updateLinks(),this.hash()}}class JetSearch{constructor(e){this.config=JetSearch.extend(e),this.parameters=this.config.parameters,this.query=this.config.query,this.alternative=this.config.alternative,this.ignoreStorages="string"==typeof this.config.ignoreStorages?[this.config.ignoreStorages]:this.config.ignoreStorages,this.joinWith=this.config.joinWith,this.windowStorage,this.storage,this.url,this.init(),this.config.onInit()}static extend(e){const t={mode:"",button:"",baseUrl:"",parameters:[],alternative:{},endUrl:"",ignoreStorages:"",storagePrefix:"",joinWith:"",concatenateWith:"",lowerCase:!0,regex:[],checkStorage:"session",onInit:()=>{},onClick:(e,t)=>{},onComplete:e=>{}};for(const i in e)t[i]=e[i];return t}storageType(){"local"===this.config.checkStorage?(this.storage=localStorage,this.windowStorage=window.localStorage):(this.storage=sessionStorage,this.windowStorage=window.sessionStorage)}arrayRemove(e,t){return e.filter(e=>e!=t)}getParameters(){let e=[];return this.parameters&&this.parameters.forEach(t=>{if("object"==typeof t)if(Array.isArray(t))t.toString().includes("null")||t.includes(null)||t.includes("")||t.forEach(t=>{e.push(t)});else for(const i in t){const s=t[i];i&&s&&e.push(`${i}${this.joinWith}${s}`)}else t&&e.push(t)}),e}getParametersAuto(){let e=[];if("auto"===this.config.mode)for(const t in this.windowStorage){const i=this.storage.getItem(t);i&&!t.indexOf(this.config.storagePrefix)&&(this.ignoreStorages?this.ignoreStorages.forEach(s=>{t!==s&&e.push(`${t}${this.joinWith}${i}`)}):e.push(`${t}${this.joinWith}${i}`))}return e}getQueries(){const e=new URLSearchParams;if(this.query)for(const[t,i]of Object.entries(this.query))i&&e.append(t,i);return e.toString()?`?${e}`:""}getAlternative(){let e=[];for(const t in this.alternative){const i=this.alternative[t];for(const t in i){const s=i[t];if("object"==typeof s)if(Array.isArray(s))s.forEach(t=>{s.toString().includes("null")||s.includes(null)||s.includes("")?e=this.arrayRemove(e,t):e.push(t)});else for(const t in s){const i=s[t],o=`${t}${this.config.joinWith}${i}`;t&&i?e.push(`${t}${this.joinWith}${i}`):e=this.arrayRemove(e,o)}else s?e.push(s):e=this.arrayRemove(e,s)}}return e}createUrl(){let e=[],t=this.getParameters(),i=this.getAlternative(),s=this.getQueries();this.getParametersAuto(),i.length&&(t=i),t.forEach(t=>{e.push(t)});let o=e.join(this.config.concatenateWith);this.config.regex&&(o=this.doRegex(o)),this.url=`${this.config.baseUrl}${o}${this.config.endUrl}${s}`,this.config.lowerCase&&(this.url=this.url.toLowerCase())}doRegex(e){return Array.isArray(this.config.regex[0])?this.config.regex.forEach(t=>{e=e.replace(t[0],t[1])}):e=e.replace(this.config.regex[0],this.config.regex[1]),e}getUrl(){return this.createUrl(),this.url}btnClick(e){this.getUrl(),this.config.onClick(this.url,e)}createBtnEvent(){if(this.config.button){const e=document.querySelectorAll(this.config.button);e.forEach(e=>{"A"===e.tagName?e.href=this.getUrl():e.addEventListener("click",e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),this.btnClick(e.target)},!0)})}}removeStorage(e,t,i){let s=sessionStorage,o=window.sessionStorage;if("local"===e&&(s=localStorage,o=window.localStorage),"string"==typeof i&&(i=[i]),"object"==typeof t)t.forEach(e=>{(!i||i&&-1===i.indexOf(e))&&s.removeItem(e)});else for(const e in o){const o=-1!==e.indexOf(t),n=i?-1===i.indexOf(e):"";(o&&!i||o&&i&&n)&&s.removeItem(e)}}init(){this.storageType(),this.createUrl(),this.createBtnEvent(),this.config.onComplete(this.url)}}class JetSelect{constructor(e){this.config=JetSelect.extend(e),this.elements=document.querySelectorAll(this.config.element),this.names="string"==typeof this.config.name?[this.config.name]:this.config.name,this.optionsText=this.config.optionsText,this.optionsValue=this.config.optionsValue,this.optionsCounter=this.config.counter,this.activeClass="jetselect__item--active",this.valueObject={},this.labelObject={},this.sortMap={},this.selectedOptions=[],this.tabIndex=null,this.baseName,this.titles,this.storage,this.init(),this.config.onInit()}static extend(e){const t={element:"",name:"",type:"",selectionLimit:"",optionsText:[],optionsValue:[],counter:[],deselectAll:"",selectAll:"",label:"",sortBy:[],sortOrder:"ascending",sortTitle:!1,sortTotal:!1,tags:!1,tagsOnChange:!1,tagsTarget:"",filter:!1,filterEmpty:!0,filterTarget:"",filterOpenOnFocus:!0,filterCloseOnBlur:!0,filterPlaceholder:"",filterNotFound:"",filterType:"text",validateOperator:"",validateTarget:"",defaultMobile:!1,storage:"session",onInit:()=>{},onOpen:()=>{},onClose:()=>{},onChange:e=>{},onDeselectAll:()=>{},onSelectAll:()=>{},onKeyUp:()=>{},onKeyDown:()=>{},onKeyEnter:()=>{},onFocus:()=>{},onBlur:()=>{},onClickTag:e=>{},onValidateError:()=>{},onLimit:()=>{}};for(const i in e)t[i]=e[i];return t}arrayLowerCase(e){e.forEach((t,i)=>{Array.isArray(t)?t.forEach((e,i)=>{isNaN(e)&&(t[i]=e.toLowerCase())}):isNaN(t)&&(e[i]=t.toLowerCase())})}setBaseName(e){const t=e.getAttribute("class"),i=this.config.element.split(",");i.forEach(i=>{i=i.trim().substr(1),t.indexOf(i)>-1&&(e.dataset.jetselectName=i)}),this.baseName=e.dataset.jetselectName}storageType(){"local"===this.config.storage?this.storage=localStorage:this.storage=sessionStorage}storageCheck(){this.names.forEach(e=>{if(this.storage.getItem(e)){const t=this.storage.getItem(e),i=t.split(",");this.valueObject[e]||(this.valueObject[e]=[]),i.forEach(t=>{t=t.toString().toLowerCase(),this.valueObject[e].push(t)})}})}update(){this.storageCheck(),this.names.forEach(e=>{this.storage.getItem(e)||(this.valueObject[e]||(this.valueObject[e]=[]),this.valueObject[e].push(""))}),this.elements.forEach((e,t)=>{this.updateSelect(e),this.config.tags&&this.updateTags(e,t)})}updateTags(e,t){let i,s=document.createDocumentFragment();i=this.config.tagsTarget?document.querySelectorAll(this.config.tagsTarget):e.querySelectorAll(".jetselect__label"),i.forEach(e=>{for(const o in this.labelObject)this.labelObject[o].forEach(o=>{const n=`[data-jetselect-id="${this.config.name}"][data-jetselect-label="${o}"]`,a=e.querySelector(n),r=document.querySelector(`.${this.baseName}-item[data-jetselect-text="${o}"]`),l=r.dataset.jetselectValue.split(",");if(this.config.tagsTarget||(i[0].innerHTML=""),!a){const e=this.createTag(o,l,t);s.appendChild(e)}});e.appendChild(s)})}addTags(e,t,i){let s,o=document.createDocumentFragment();this.config.tagsTarget?s=document.querySelectorAll(this.config.tagsTarget):(s=e.querySelectorAll(".jetselect__label"),s[0].querySelector(".jetselect__tag")||(s[0].innerHTML="")),s.forEach(s=>{const n=`[data-jetselect-id="${this.config.name}"][data-jetselect-label="${t}"]`,a=s.querySelector(n),r=e.querySelector(`[data-jetselect-text="${t}"]`),l=r.dataset.jetselectValue.split(",");if(!a){const e=this.createTag(t,l,i);o.appendChild(e),s.appendChild(o)}})}removeTags(e,t){let i;i=this.config.tagsTarget?document.querySelectorAll(this.config.tagsTarget):e.querySelectorAll(".jetselect__label"),i.forEach(e=>{const i=e.querySelector(`[data-jetselect-label="${t}"]`);i&&i.parentNode.removeChild(i),this.config.tagsTarget||e.querySelector(".jetselect__tag")||(e.innerHTML=this.config.label)})}createTag(e,t,i){let s=document.createElement("span"),o=document.createElement("span"),n=document.createElement("span");return"multiple"===this.config.type?this.config.name.constructor!==Array&&(t=t.toString()):t=t.toString(),s.addEventListener("click",e=>{this.clickTag(t)}),n.className=`${this.baseName}-delete-btn jetselect__delete-btn`,o.className=`${this.baseName}-tag-text jetselect__tag-text`,s.className=`${this.baseName}-tag jetselect__tag`,s.dataset.jetselectId=this.config.name,s.dataset.jetselectLabel=e,o.innerHTML=e,s.appendChild(o),s.appendChild(n),s}setLabel(e){const t=e.querySelectorAll(`.${this.activeClass}`),i=e.querySelector(".jetselect__label"),s=this.config.name;let o=[];this.labelObject[s]||(this.labelObject[s]=[]),t.forEach(e=>{const t=e.dataset.jetselectText,i=this.labelObject[s].indexOf(t);o.push(t),-1===i&&this.labelObject[s].push(t)}),o[0]?i.innerHTML=o.join(", "):i.innerHTML=this.config.label}updateSelect(e){let t=this.names.map(e=>"");const i=Object.entries(this.valueObject);let s={};i.forEach(e=>{const i=this.names.indexOf(e[0]);t[i]=e}),t.forEach((e,t)=>{e[1].forEach((e,t)=>{s[t]||(s[t]=[]),s[t].push(e)})});for(const t in s){const i=s[t],o=e.querySelector(`[data-jetselect-value="${i}"]:not(.jetselect__item--deselect-all)`),n=e.querySelector(`[value="${i}"]`);o&&(o.classList.add(this.activeClass),o.classList.add(`${this.baseName}-item--active`),n.selected=!0)}this.setLabel(e)}createSelect(e,t){let i=document.createDocumentFragment(),s=document.createElement("select"),o=document.createElement("div"),n=document.createElement("ul"),a=document.createElement("div"),r=document.createElement("span"),l=document.createElement("span");a.className=`${this.baseName}-btn jetselect__btn`,r.className=`${this.baseName}-label jetselect__label`,r.innerHTML=this.config.label,l.className=`${this.baseName}-icon jetselect__icon`,o.className=`${this.baseName}-box jetselect__box`,n.className=`${this.baseName}-list jetselect__list`,s.className="jetselect__default",this.isMobile()&&this.config.defaultMobile?(s.style.width="100%",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.opacity="0",s.style.zIndex="9"):s.style.display="none","multiple"===this.config.type&&(s.multiple=!0),this.createList({element:e,select:s,list:n,text:this.optionsText,value:this.optionsValue,counter:this.optionsCounter,addIndex:0,index:t}),s.addEventListener("change",this.change),a.appendChild(r),a.appendChild(l),i.appendChild(a),o.appendChild(n),i.appendChild(o),i.appendChild(s),a.addEventListener("click",()=>{this.openClose(t)}),window.addEventListener("mousedown",e=>{this.clickInside(t,e)}),window.addEventListener("touchstart",e=>{this.clickInside(t,e)}),this.optionsText.toString()?e.classList.remove("jetselect--disabled"):e.classList.add("jetselect--disabled"),e.classList.add("jetselect"),e.appendChild(i),this.createTotal(e)}createList(e){const t=e.element.querySelector(".jetselect__option--deselect-all"),i=e.element.querySelector(".jetselect__option--deselect-all");this.config.filter&&this.createSearchInput(e.element,e.list,e.index),!t&&this.config.deselectAll&&this.createOption({element:e.element,select:e.select,list:e.list,itemClass:" jetselect__option--deselect-all",btnClass:" jetselect__item--deselect-all",text:this.config.deselectAll,value:"",addIndex:e.addIndex,index:e.index}),!i&&this.config.selectAll&&"multiple"===this.config.type&&this.createOption({element:e.element,select:e.select,list:e.list,itemClass:" jetselect__option--select-all",btnClass:" jetselect__item--select-all",text:this.config.selectAll,value:"*",addIndex:e.addIndex,index:e.index}),e.text.forEach((t,i)=>{this.config.sortTitle&&this.createTitle({select:e.select,list:e.list,text:this.sortMap[i]}),this.createOption({element:e.element,select:e.select,list:e.list,itemClass:"",btnClass:"",text:t,value:this.optionsValue[i],counter:this.optionsCounter,optionIndex:i,addIndex:e.addIndex,index:e.index})})}createTitle(e){if(-1===this.titles.indexOf(e.text)){let t=document.createElement("optgroup"),i=document.createElement("ul"),s=document.createElement("div"),o=document.createElement("span"),n=document.createElement("span");this.titles.push(e.text),t.label=e.text,i.className=`${this.baseName}-group jetselect__group`,s.className=`${this.baseName}-title jetselect__title`,o.className=`${this.baseName}-name jetselect__name`,n.className=`${this.baseName}-total jetselect__total`,i.dataset.jetselectTitle=e.text,o.innerHTML=e.text,e.select.appendChild(t),s.appendChild(o),s.appendChild(n),i.appendChild(s),e.list.appendChild(i)}}createTotal(e){if(this.config.sortTitle&&this.config.sortTotal){const t=e.querySelectorAll(".jetselect__group");t.forEach(e=>{let t=e.querySelector(".jetselect__total");const i=e.querySelectorAll("li");let s=0;i.forEach(e=>{if(this.optionsCounter&&this.optionsCounter.length){const t=e.querySelector(".jetselect__counter");s=Number(t.innerHTML)}else s=i.length}),t.innerHTML=s})}}createOption(e){let t=document.createElement("option"),i=document.createElement("li"),s=document.createElement("a"),o=document.createElement("span");const n=e.select.querySelector(`[label="${this.sortMap[e.optionIndex]}"]`),a=e.list.querySelector(`[data-jetselect-title="${this.sortMap[e.optionIndex]}"]`);if(i.className=`${this.baseName}-option jetselect__option${e.itemClass}`,s.className=`${this.baseName}-item jetselect__item${e.btnClass}`,o.className=`${this.baseName}-text jetselect__text`,s.dataset.jetselectText=e.text,s.dataset.jetselectValue=e.value,t.value=e.value,t.innerHTML=e.text,o.innerHTML=e.text,s.appendChild(o),i.appendChild(s),a?(a.appendChild(i),n.appendChild(t),this.addAtIndex(a,i,e.addIndex),this.addAtIndex(n,t,e.addIndex)):(e.list.appendChild(i),this.addAtIndex(e.list,i,e.addIndex),this.addAtIndex(e.select,t,e.addIndex)),"multiple"===this.config.type){let e=document.createElement("span");e.className=`${this.baseName}-checkbox jetselect__checkbox`,s.insertBefore(e,o)}if(e.counter&&e.counter.length&&e.counter[e.optionIndex]){let t=document.createElement("span");t.className=`${this.baseName}-counter jetselect__counter`,t.innerHTML=e.counter[e.optionIndex],s.appendChild(t)}s.addEventListener("click",()=>{this.clickEvent(e.value,e.index)})}addAtIndex(e,t,i){const s=e.children.length;i||(i=s),i>=e.children.length?e.appendChild(t):e.insertBefore(t,e.children[i])}add(e){this.optionsText=e.text,this.optionsValue=e.value,this.optionsCounter=e.counter,this.tabIndex=null,e.sort&&(this.titles=[],this.sort(e.sort)),this.elements.forEach((t,i)=>{const s=t.querySelector("select"),o=t.querySelector("ul");this.optionsText.toString()?t.classList.remove("jetselect--disabled"):t.classList.add("jetselect--disabled"),this.createList({element:t,select:s,list:o,text:this.optionsText,value:this.arrayLowerCase(this.optionsValue),counter:this.optionsCounter,addIndex:e.addIndex,index:i}),this.createTotal(t)})}remove(e){this.elements.forEach(t=>{const i=t.querySelector("select"),s=t.querySelector("ul");e?e.forEach(e=>{const t=s.querySelector(`[data-jetselect-text="${e}"]`),o=t.dataset.jetselectValue,n=i.querySelector(`[value="${o}"]`),a=this.optionsText.indexOf(e),r=this.optionsValue.indexOf(o);-1!==a&&(this.optionsText.splice(a,1),this.optionsValue.splice(r,1),n.parentNode.removeChild(n),t.parentNode.removeChild(t))}):(t.classList.add("jetselect--disabled"),this.valueObject={},this.labelObject={},this.sortMap={},this.optionsText=[],this.optionsValue=[],i.innerHTML="",s.innerHTML="")})}createSearchInput(e,t,i){let s=document.createElement("div"),o=document.createElement("input");s.className=`${this.baseName}-filter jetselect__filter`,o.className=`${this.baseName}-input jetselect__input`,o.type=this.config.filterType,this.config.filterPlaceholder&&(o.placeholder=this.config.filterPlaceholder),o.addEventListener("focus",()=>{this.focus(i)}),o.addEventListener("blur",()=>{this.blur(i)}),o.addEventListener("keyup",e=>{this.keyUp(i,e)}),this.config.filterTarget&&(t=document.querySelector(this.config.filterTarget)),s.appendChild(o),this.config.filterEmpty&&s.appendChild(this.emptyBtn(o,i)),t.appendChild(s)}emptyBtn(e,t){let i=document.createElement("a");return i.className=`${this.baseName}-empty-btn jetselect__empty-btn`,i.addEventListener("click",i=>{e.value="",this.manageEmptyBtn("",t),this.manageFilter("",t),this.notFound(t),this.config.onKeyUp()}),i}manageEmptyBtn(e,t){const i=this.elements[t].querySelector(".jetselect__empty-btn");i&&(i.style.display=e?"block":"none")}clickInside(e,t){const i=this.elements[e].contains(t.target),s=this.elements[e].classList.contains("jetselect--opened");s&&!i&&this.close(e)}openClose(e){const t=this.elements[e].classList.contains("jetselect--opened");t?this.close(e):this.open(e)}open(e){const t=this.elements[e].querySelector("ul");this.elements[e].classList.add("jetselect--opened"),t.classList.add("jetselect__list--opened"),this.config.onOpen()}close(e){const t=this.elements[e].querySelector("ul"),i=t.querySelector(".jetselect__item--focused");i&&(this.removeFocus(i),this.tabIndex=null),this.elements[e].classList.remove("jetselect--opened"),t.classList.remove("jetselect__list--opened"),t.classList.remove("jetselect__list--opened-top"),this.config.onClose()}setStorage(e){let t;this.valueObject={},this.storageCheck(),this.names.forEach((i,s)=>{this.valueObject[i]||(this.valueObject[i]=[]),t=this.config.name.constructor===Array?e[s]:e;const o=this.valueObject[i].indexOf(t);if(-1===o)this.config.selectionLimit&&this.config.selectionLimit<=this.valueObject[i].length?this.config.onLimit():this.valueObject[i].push(t);else{let s;this.elements.forEach(t=>{s=t.querySelector(`[data-jetselect-value="${e}"]`)}),s.classList.contains(this.activeClass)?this.valueObject[i].splice(o,1):this.valueObject[i].push(t)}this.valueObject[i][0]?this.storage.setItem(i,this.valueObject[i]):this.storage.removeItem(i)})}removeStorage(){this.names.forEach(e=>{this.valueObject[e]=[],this.storage.removeItem(e)})}validateNumber(e){const t=this.storage.getItem(this.config.validateTarget),i="<"===this.config.validateOperator&&t>e,s=">"===this.config.validateOperator&&t<e;if(null===t||i||s)return!0}change(){const e=this.querySelectorAll("option");let t,i=[];e.forEach(e=>{const t=e.selected;if(t){const t=e.value;i.push(t)}});const s=this.selectedOptions.filter(e=>i.indexOf(e)<0),o=i.filter(e=>this.selectedOptions.indexOf(e)<0);t="multiple"!==this.config.type?i.toString():(s.length?s:o)[0],this.selectedOptions=i;const n=this.optionsValue.indexOf(t);if(this.config.name.constructor===Array&&(t=t.split(",")),s.length)this.clickEvent(t,n);else if(!this.config.selectionLimit||this.config.selectionLimit&&this.selectedOptions.length<=this.config.selectionLimit)this.clickEvent(t,n);else{const e=this.querySelector(`option[value=${t}]`);e.selected=!1}
}clickEvent(e,t){!e||this.validateNumber(e)?("multiple"!==this.config.type&&this.selectOption(e),e&&"*"!==e&&this.setStorage(e),"multiple"===this.config.type&&this.selectOption(e),"multiple"===this.config.type&&e&&"*"!==e||(this.isMobile()||this.config.defaultMobile)&&(this.isMobile()||!this.config.defaultMobile)||this.close(t),e||this.config.onDeselectAll(),"*"===e&&this.config.onSelectAll(),e&&this.config.onChange(this.valueObject)):this.config.onValidateError()}checkAll(e,t){const i=this.config.tags&&this.config.tagsTarget;this.optionsValue.forEach((i,s)=>{if(!this.config.selectionLimit||s<this.config.selectionLimit){const s=e.querySelector(`[data-jetselect-value="${i}"]`),o=e.querySelector(`[value="${i}"]`),n=s.dataset.jetselectText;s.classList.contains(this.activeClass)&&o.selected||(s.classList.add(this.activeClass),s.classList.add(`${this.baseName}-item--active`),o.selected=!0,this.config.tags&&this.addTags(e,n,t),0===t&&this.setStorage(i))}}),this.config.tags&&!i||this.setLabel(e)}uncheckAll(e){const t=this.config.tags&&this.config.tagsTarget;this.optionsValue.forEach(t=>{const i=e.querySelector(`[data-jetselect-value="${t}"]`),s=e.querySelector(`[value="${t}"]`);let o;i&&(o=i.dataset.jetselectText,i.classList.remove(this.activeClass),i.classList.remove(`${this.baseName}-item--active`),s.selected=!1,this.config.tags&&this.removeTags(e,o))}),this.removeStorage(),this.config.tags&&!t||this.setLabel(e)}sort(e){this.sortMap=e.map((e,t)=>({index:t,value:e})),this.sortMap.sort((e,t)=>isNaN(e.value)&&isNaN(t.value)?+(e.value>t.value)||+(e.value===t.value)-1:e.value-t.value),this.optionsText=this.sortMap.map(e=>this.optionsText[e.index]),this.optionsValue=this.sortMap.map(e=>this.optionsValue[e.index]),this.optionsCounter&&this.optionsCounter.length&&(this.optionsCounter=this.sortMap.map(e=>this.optionsCounter[e.index])),this.sortMap=this.sortMap.map(e=>e[Object.keys(e)[1]]),"descending"===this.config.sortOrder&&(this.optionsText.reverse(),this.optionsValue.reverse(),this.optionsCounter.reverse(),this.sortMap.reverse())}filter(e,t){const i=t.split(" ");let s,o;for(let t=0;o=i[t++];){if(s=new RegExp(o,"ig"),!s.test(e))return!1;e=e.replace(s,"")}return!0}manageFilter(e,t){const i=this.elements[t].querySelectorAll("li:not(.jetselect__option--deselect-all):not(.jetselect__option--select-all)"),s="jetselect__option--hidden";i.forEach((i,o)=>{const n=this.elements[t].querySelector(`[data-jetselect-title="${this.sortMap[o]}"]`);let a;if(n&&(a=n.querySelectorAll("li")),e){const t=i.querySelector("a");let o=t.innerHTML;if(this.filter(o,e))i.classList.remove(s),n&&a[0]&&n.classList.remove(s);else if(i.classList.add(s),n){const e=n.querySelectorAll(`li.${s}`);a.length===e.length&&n.classList.add(s)}}else i.classList.remove(s),n&&n.classList.remove(s)})}selectOption(e){this.elements.forEach((t,i)=>{const s=t.querySelector(`[data-jetselect-value="${e}"]`),o=t.querySelector(`[value="${e}"]`),n=s.dataset.jetselectText,a=s.classList.contains(this.activeClass)&&"multiple"===this.config.type,r=this.config.tags&&this.config.tagsTarget,l=this.valueObject[Object.keys(this.valueObject)[0]],c=l?l.length:1;"multiple"===this.config.type&&e?"*"===e&&this.checkAll(t,i):this.uncheckAll(t),e&&"*"!==e&&(a?(s.classList.remove(this.activeClass),s.classList.remove(`${this.baseName}-item--active`),o.selected=!1,this.config.tags&&this.removeTags(t,n)):(!this.config.selectionLimit||c<this.config.selectionLimit)&&(s.classList.add(this.activeClass),s.classList.add(`${this.baseName}-item--active`),o.selected=!0,this.config.tags&&this.config.tagsOnChange&&this.addTags(t,n,i))),this.config.tags&&!r||this.setLabel(t)})}clickTag(e){let t;this.valueObject={},this.storageCheck(),this.names.forEach((i,s)=>{this.valueObject[i]||(this.valueObject[i]=[]),t=this.config.name.constructor===Array?e[s]:e;const o=this.valueObject[i].indexOf(t);-1!==o&&this.valueObject[i].splice(o,1),this.storage.setItem(i,this.valueObject[i]),this.storage.getItem(i)||this.storage.removeItem(i)}),this.elements.forEach((t,i)=>{const s=t.querySelector(`[data-jetselect-value="${e}"]`),o=s.dataset.jetselectText,n=this.config.tags&&this.config.tagsTarget;s.classList.remove(this.activeClass),s.classList.remove(`${this.baseName}-item--active`),this.removeTags(t,o),this.config.tags&&!n||this.setLabel(t)}),this.config.onClickTag(e)}focus(e){this.config.filterOpenOnFocus&&this.config.filterTarget&&this.open(e),this.config.onFocus()}blur(e){this.config.filterCloseOnBlur&&this.config.filterTarget&&this.close(e),this.config.onBlur()}keyUp(e,t){const i=t.target.value;this.manageFilter(i,e),this.manageEmptyBtn(i,e),this.notFound(e),this.config.onKeyUp()}keyDown(e,t){const i=this.elements[e].querySelector("ul"),s=i.offsetHeight,o=i.querySelectorAll("li"),n=t.target.value;38===t.keyCode&&(t.preventDefault(),this.keyUpList(o,i,s)),40===t.keyCode&&(t.preventDefault(),this.keyDownList(o,i,s)),13===t.keyCode&&this.keyEnterList(o),this.config.onKeyDown(n)}keyUpList(e,t){this.removeFocus(e[this.tabIndex]),this.tabIndex>0?this.tabIndex--:this.tabIndex=e.length-1,this.addFocus(e[this.tabIndex]),this.scrollUp(e,t)}keyDownList(e,t,i){this.removeFocus(e[this.tabIndex]),null===this.tabIndex||this.tabIndex===e.length-1?this.tabIndex=0:this.tabIndex++,this.addFocus(e[this.tabIndex]),this.scrollDown(e,t,i)}keyEnterList(e){this.tabIndex&&e[this.tabIndex].querySelector("a").click(),this.config.onKeyEnter()}scrollUp(e,t){var i=e[this.tabIndex].offsetTop;t.scrollTop>=i?t.scrollTop=i:this.tabIndex===e.length-1&&(t.scrollTop=t.scrollHeight)}scrollDown(e,t,i){const s=e[this.tabIndex].offsetTop,o=e[this.tabIndex].offsetHeight,n=s-i+o;t.scrollTop<=n?t.scrollTop=n:s<t.scrollTop?t.scrollTop=s:0===this.selectedOptions&&(t.scrollTop=0)}addFocus(e){e.classList.add(`${this.baseName}-item--focused`),e.classList.add("jetselect__item--focused")}removeFocus(e){e&&(e.classList.remove(`${this.baseName}-item--focused`),e.classList.remove("jetselect__item--focused"))}notFound(e){const t=this.elements[e].querySelector("ul"),i="jetselect__option--hidden",s=t.querySelectorAll(`li.${i}:not(.jetselect__option--deselect-all):not(.jetselect__option--select-all)`),o=t.querySelector(".jetselect__option--deselect-all"),n=t.querySelector(".jetselect__option--select-all"),a=t.querySelector(".jetselect__not-found");if(s.length>=this.optionsText.length){if(o&&o.classList.add(i),n&&n.classList.add(i),!a&&this.config.filterNotFound){let e=document.createElement("div");const i=document.createTextNode(this.config.filterNotFound);e.className="jetselect__not-found",e.appendChild(i),t.appendChild(e)}}else o&&o.classList.remove(i),n&&n.classList.remove(i),a&&a.parentNode.removeChild(a)}destroy(){this.elements.forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})}isMobile(){return/Mobi|Android/i.test(navigator.userAgent)}init(){this.storageType(),this.config.sortBy[0]&&this.sort(this.config.sortBy),this.arrayLowerCase(this.optionsValue),this.elements.forEach((e,t)=>{e.classList.remove("jetselect"),e.classList.remove("jetselect--opened"),e.tabIndex="0",e.innerHTML="",this.titles=[],e.addEventListener("keydown",e=>{this.keyDown(t,e)}),this.setBaseName(e),this.createSelect(e,t)});const e=this.names.some(e=>this.storage.getItem(e));e&&this.update()}}class JetSlider{constructor(e){this.config=JetSlider.extend(e),this.element="string"==typeof this.config.element?document.querySelector(this.config.element):this.config.element,this.prevBtn=this.config.prev&&"string"==typeof this.config.prev?document.querySelector(this.config.prev):this.config.prev,this.nextBtn=this.config.next&&"string"==typeof this.config.next?document.querySelector(this.config.next):this.config.next,this.pagination=this.config.pagination&&"string"==typeof this.config.pagination?document.querySelector(this.config.pagination):this.config.pagination,this.slidesToShow=this.config.slidesToShow,this.slidesToScroll=this.config.slidesToScroll,"string"==typeof this.config.element?this.baseClass=this.config.element.substr(1):this.config.element.className.includes(" ")?this.baseClass=this.config.element.className.split(" ")[0]:this.baseClass=this.config.element.className;const t=["resize","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","keyDown","clickHandler"];if(null===this.element)return!1;this.element.classList.add("jetslider"),this.resolveSlidesToShow(),this.resolveSlidesToScroll(),this.elementWidth=this.element.offsetWidth+this.config.gap,this.innerElements=[].slice.call(this.element.children),this.currentSlideCheck=this.config.startIndex%this.innerElements.length,this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.slidesToShow)),t.forEach(e=>{this[e]=this[e].bind(this)}),this.config.onChange(this.currentSlide+1,this.innerElements.length),this.init()}static extend(e){const t={element:"",prev:"",next:"",speed:450,easing:"ease",slidesToShow:1,slidesToScroll:1,startIndex:0,gap:0,draggable:!0,multipleDrag:!0,threshold:20,keyboard:!1,loop:!1,rtl:!1,autoplay:!1,autoplaySpeed:5e3,stopOnOver:!0,pagination:"",onInit:()=>{},onChange:(e,t)=>{},onKeyDown:e=>{},onResize:()=>{}};for(const i in e)t[i]=e[i];return t}attachEvents(){window.addEventListener("resize",this.resize),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.element.addEventListener("touchstart",this.touchstartHandler,{passive:!0}),this.element.addEventListener("touchend",this.touchendHandler),this.element.addEventListener("touchmove",this.touchmoveHandler,{passive:!0}),this.element.addEventListener("mousedown",this.mousedownHandler),this.element.addEventListener("mouseup",this.mouseupHandler),this.element.addEventListener("mouseleave",this.mouseleaveHandler),this.element.addEventListener("mousemove",this.mousemoveHandler),this.element.addEventListener("click",this.clickHandler)),this.config.keyboard&&(this.element.tabIndex="0",this.element.focus(),this.element.addEventListener("keydown",this.keyDown)),this.config.autoplay&&this.config.stopOnOver&&(this.element.addEventListener("mouseover",this.stopAutoplay.bind(this)),this.element.addEventListener("mouseout",this.restartAutoplay.bind(this))),this.prevBtn&&this.prevBtn.addEventListener("click",()=>{this.prev(this.slidesToScroll)}),this.nextBtn&&this.nextBtn.addEventListener("click",()=>{this.next(this.slidesToScroll)})}detachEvents(){window.removeEventListener("resize",this.resize),this.element.removeEventListener("touchstart",this.touchstartHandler,{passive:!0}),this.element.removeEventListener("touchend",this.touchendHandler),this.element.removeEventListener("touchmove",this.touchmoveHandler,{passive:!0}),this.element.removeEventListener("mousedown",this.mousedownHandler),this.element.removeEventListener("mouseup",this.mouseupHandler),this.element.removeEventListener("mouseleave",this.mouseleaveHandler),this.element.removeEventListener("mousemove",this.mousemoveHandler),this.element.removeEventListener("click",this.clickHandler),this.config.keyboard&&this.element.removeEventListener("keydown",this.keyDown),this.config.autoplay&&this.config.stopOnOver&&(this.element.removeEventListener("mouseover",this.stopAutoplay.bind(this)),this.element.removeEventListener("mouseout",this.restartAutoplay.bind(this))),this.prevBtn&&this.prevBtn.removeEventListener("click",()=>{this.prev(this.slidesToScroll)}),this.nextBtn&&this.nextBtn.removeEventListener("click",()=>{this.next(this.slidesToScroll)})}addDots(){this.pagination.classList.add("jetslider__pagination",`${this.baseClass}__pagination`);const e=Math.ceil(this.innerElements.length/this.slidesToScroll);this.pagination.innerHTML="";for(let t=0;t<e;t++){let e=document.createElement("li"),i=document.createElement("button");e.classList.add("jetslider__pagination-item",`${this.baseClass}__pagination-item`),i.classList.add("jetslider__bullet",`${this.baseClass}__bullet`),i.dataset.jetsliderBullet=0===t?t:t*this.slidesToScroll,i.addEventListener("click",e=>{this.goTo(e.target.dataset.jetsliderBullet)}),e.appendChild(i),this.pagination.appendChild(e)}}updateDots(){let e=this.pagination.querySelectorAll("li"),t=this.element.querySelector(`.${this.baseClass}__item--active`);t||(this.innerElements[0].classList.add("jetslider__item--active",`${this.baseClass}__item--active`),t=this.element.querySelector(`.${this.baseClass}__item--active`)),e.forEach((e,i)=>{let s=Number(t.dataset.jetsliderPage)===i?"add":"remove";e.querySelector("button").classList[s]("jetslider__bullet--active",`${this.baseClass}__bullet--active`)})}startAutoplay(){this.autoplayIntervalInstace=setInterval(()=>{this.pointerDown||this.next(this.slidesToScroll)},this.config.autoplaySpeed)}stopAutoplay(){clearInterval(this.autoplayIntervalInstace)}restartAutoplay(){this.stopAutoplay(),this.config.autoplay&&this.startAutoplay()}init(){this.attachEvents(),this.element.style.overflow="hidden",this.element.style.direction=this.config.rtl?"rtl":"ltr",this.createContainer(),this.updateItens(),this.config.autoplay&&this.startAutoplay(),this.pagination&&(this.addDots(),this.updateDots(),this.pagination.classList.toggle("jetslider__pagination--disabled",this.innerElements.length<=this.slidesToShow)),this.config.onInit.call(this);const e=new IntersectionObserver(this.resize);e.observe(this.element)}createContainer(){const e=this.elementWidth/this.slidesToShow,t=this.config.loop?this.innerElements.length+2*this.slidesToShow:this.innerElements.length;let i=0;this.sliderFrame=document.createElement("div"),this.sliderFrame.classList.add("jetslider__container",`${this.baseClass}__container`),this.sliderFrame.style.width=`${e*t}px`,this.sliderFrame.style.height="100%",this.sliderFrame.style.display="inline-block",this.enableTransition(),this.config.draggable&&(this.element.style.cursor="-webkit-grab");const s=document.createDocumentFragment();if(this.config.loop&&this.innerElements.length>this.slidesToShow)for(let e=this.innerElements.length-this.slidesToShow;e<this.innerElements.length;e++){const t=this.createItem(this.innerElements[e].cloneNode(!0)),i=Math.ceil(this.innerElements.length/this.slidesToScroll);t.setAttribute("data-jetslider-page",i-1),s.appendChild(t)}for(let e=0;e<this.innerElements.length;e++){const t=this.createItem(this.innerElements[e]);e%this.slidesToShow==0&&0!==e&&i++,t.setAttribute("data-jetslider-page",i),s.appendChild(t)}if(this.config.loop&&this.innerElements.length>this.slidesToShow)for(let e=0;e<this.slidesToShow;e++){const t=this.createItem(this.innerElements[e].cloneNode(!0));t.setAttribute("data-jetslider-page",0),s.appendChild(t)}this.sliderFrame.appendChild(s),this.element.innerHTML="",this.element.appendChild(this.sliderFrame),this.slideToCurrent()}createItem(e){const t=document.createElement("div"),i=`${this.config.loop?100/(this.innerElements.length+2*this.slidesToShow):100/this.innerElements.length}%`;return t.classList.add("jetslider__item",`${this.baseClass}__item`),t.style.cssFloat=this.config.rtl?"right":"left",t.style.float=this.config.rtl?"right":"left",t.style.marginRight=`${this.config.gap}px`,t.style.width=`calc(${i} - ${this.config.gap}px)`,t.appendChild(e),t}resolveSlidesToShow(){if("number"==typeof this.config.slidesToShow)this.slidesToShow=this.config.slidesToShow;else if("object"==typeof this.config.slidesToShow){this.slidesToShow=1;for(const e in this.config.slidesToShow)document.documentElement.clientWidth>=e&&(this.slidesToShow=this.config.slidesToShow[e])}}resolveSlidesToScroll(){if("number"==typeof this.config.slidesToScroll)this.slidesToScroll=this.config.slidesToScroll;else if("object"==typeof this.config.slidesToScroll){this.slidesToScroll=1;for(const e in this.config.slidesToScroll)document.documentElement.clientWidth>=e&&(this.slidesToScroll=this.config.slidesToScroll[e])}}prev(e=1,t){if(this.innerElements.length<=this.slidesToShow)return;this.restartAutoplay();const i=this.currentSlide;if(this.config.loop){const t=this.currentSlide-e<0;if(t){this.disableTransition();const t=this.currentSlide+this.innerElements.length,i=this.slidesToShow,s=t+i,o=(this.config.rtl?1:-1)*s*(this.elementWidth/this.slidesToShow),n=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style.transform=`translate3d(${o+n}px, 0, 0)`,this.currentSlide=t-e}else this.currentSlide=this.currentSlide-e}else this.currentSlide=Math.max(this.currentSlide-e,0);this.currentSlideCheck=this.currentSlide,i!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.updateItens(),this.config.pagination&&this.updateDots(),this.config.onChange(this.currentSlide+1,this.innerElements.length),t&&t.call(this))}next(e=1,t){if(this.innerElements.length<=this.slidesToShow)return;this.restartAutoplay();const i=this.currentSlide;if(this.config.loop){const t=this.currentSlide+e>this.innerElements.length-this.slidesToShow;if(t){this.disableTransition();const t=this.currentSlide-this.innerElements.length,i=this.slidesToShow,s=t+i,o=(this.config.rtl?1:-1)*s*(this.elementWidth/this.slidesToShow),n=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style.transform=`translate3d(${o+n}px, 0, 0)`,this.currentSlide=t+e}else this.currentSlide=this.currentSlide+e}else this.currentSlide=Math.min(this.currentSlide+e,this.innerElements.length-this.slidesToShow);this.currentSlideCheck=this.currentSlide,i!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.updateItens(),this.config.pagination&&this.updateDots(),this.config.onChange(this.currentSlide+1,this.innerElements.length),t&&t.call(this))}disableTransition(){this.sliderFrame.style.transition=`transform 0ms ${this.config.easing}`}enableTransition(){this.sliderFrame.style.transition=`transform ${this.config.speed}ms ${this.config.easing}`}goTo(e,t){if(this.innerElements.length<=this.slidesToShow)return;this.restartAutoplay();const i=this.currentSlide;this.currentSlide=this.config.loop?e%this.innerElements.length:Math.min(Math.max(e,0),this.innerElements.length-this.slidesToShow),this.currentSlideCheck=e%this.innerElements.length,this.updateItens(),i!==this.currentSlide&&(this.slideToCurrent(),this.config.pagination&&this.updateDots(),this.config.onChange(this.currentSlide+1,this.innerElements.length),t&&t.call(this))}updateItens(){let e=document.querySelectorAll(`.${this.baseClass}__item`),t=this.currentSlideCheck;this.config.loop&&e.length>this.slidesToShow&&(t+=this.slidesToShow),e.forEach((e,i)=>{let s=t===i?"add":"remove";e.classList[s]("jetslider__item--active",`${this.baseClass}__item--active`)})}slideToCurrent(e){const t=this.config.loop?this.currentSlide+this.slidesToShow:this.currentSlide,i=(this.config.rtl?1:-1)*t*(this.elementWidth/this.slidesToShow);this.innerElements.length>this.slidesToShow?e?requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.enableTransition(),this.sliderFrame.style.transform=`translate3d(${i}px, 0, 0)`})}):this.sliderFrame.style.transform=`translate3d(${i}px, 0, 0)`:this.sliderFrame.style.transform="translate3d(0, 0, 0)"}updateAfterDrag(){const e=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),t=Math.abs(e),i=this.config.multipleDrag?Math.ceil(t/(this.elementWidth/this.slidesToShow)):1,s=e>0&&this.currentSlide-i<0,o=e<0&&this.currentSlide+i>this.innerElements.length-this.slidesToShow;this.restartAutoplay(),e>0&&t>this.config.threshold&&this.innerElements.length>this.slidesToShow?this.prev(i):e<0&&t>this.config.threshold&&this.innerElements.length>this.slidesToShow&&this.next(i),this.slideToCurrent(s||o)}resize(){this.resolveSlidesToShow(),this.resolveSlidesToScroll(),this.currentSlide+this.slidesToShow>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.slidesToShow?0:this.innerElements.length-this.slidesToShow,this.currentSlideCheck=this.currentSlide),this.elementWidth=this.element.offsetWidth+this.config.gap;this.elementWidth,this.slidesToShow,this.config.loop?(this.innerElements.length,this.slidesToShow):this.innerElements.length;this.createContainer(),this.slideToCurrent(),this.updateItens(),this.pagination&&(this.addDots(),this.updateDots(),this.pagination.classList.toggle("jetslider__pagination--disabled",this.innerElements.length<=this.slidesToShow)),this.config.onResize.call(this)}clearDrag(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}}touchstartHandler(e){const t=-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName);t||(e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.touches[0].pageX,this.drag.startY=e.touches[0].pageY)}touchendHandler(e){e.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}touchmoveHandler(e){if(e.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-e.touches[0].pageY)<Math.abs(this.drag.startX-e.touches[0].pageX)),this.pointerDown&&this.drag.letItGo)if(e.preventDefault(),this.drag.endX=e.touches[0].pageX,this.sliderFrame.style.transition=`transform 0ms ${this.config.easing}`,this.innerElements.length>this.slidesToShow){const e=this.config.loop?this.currentSlide+this.slidesToShow:this.currentSlide,t=e*(this.elementWidth/this.slidesToShow),i=this.drag.endX-this.drag.startX,s=this.config.rtl?t+i:t-i;this.sliderFrame.style.transform=`translate3d(${(this.config.rtl?1:-1)*s}px, 0, 0)`}else this.sliderFrame.style.transform="(0, 0, 0)"}mousedownHandler(e){const t=-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName);t||(e.preventDefault(),e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.pageX)}mouseupHandler(e){e.stopPropagation(),this.pointerDown=!1,this.element.style.cursor="-webkit-grab",this.innerElements.forEach(e=>{e.style.pointerEvents=""}),this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}mousemoveHandler(e){if(e.preventDefault(),this.pointerDown)if(this.drag.preventClick=!0,e.pageX!==this.drag.startX&&this.innerElements.forEach(e=>{e.style.pointerEvents="none"}),this.drag.endX=e.pageX,this.element.style.cursor="-webkit-grabbing",this.sliderFrame.style.transition=`transform 0ms ${this.config.easing}`,this.innerElements.length>this.slidesToShow){const e=this.config.loop?this.currentSlide+this.slidesToShow:this.currentSlide,t=e*(this.elementWidth/this.slidesToShow),i=this.drag.endX-this.drag.startX,s=this.config.rtl?t+i:t-i;this.sliderFrame.style.transform=`translate3d(${(this.config.rtl?1:-1)*s}px, 0, 0)`}else this.sliderFrame.style.transform="translate3d(0, 0, 0)"}mouseleaveHandler(e){this.pointerDown&&(this.pointerDown=!1,this.element.style.cursor="-webkit-grab",this.drag.endX=e.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag(),this.innerElements.forEach(e=>{e.style.pointerEvents=""}))}keyDown(e){switch(e.keyCode){case 37:this.prev(this.slidesToShow);break;case 39:this.next(this.slidesToShow)}this.config.onKeyDown(e.keyCode)}clickHandler(e){this.drag.preventClick&&e.preventDefault(),this.drag.preventClick=!1}remove(e,t){(e<0||e>=this.innerElements.length)&&console.error("Item to remove doesn't exist 😭");const i=e<this.currentSlide,s=this.currentSlide+this.slidesToShow-1===e;(i||s)&&this.currentSlide--,this.innerElements.splice(e,1),this.createContainer(),t&&t.call(this)}insert(e,t,i){(t<0||t>this.innerElements.length+1)&&console.error("Unable to inset it at this index 😭"),-1!==this.innerElements.indexOf(e)&&console.error("The same item in a slider? Really? Nope 😭");const s=t<=this.currentSlide>0&&this.innerElements.length;this.currentSlide=s?this.currentSlide+1:this.currentSlide,this.innerElements.splice(t,0,e),this.createContainer(),i&&i.call(this)}prepend(e,t){this.insert(e,0),t&&t.call(this)}append(e,t){this.insert(e,this.innerElements.length+1),t&&t.call(this)}destroy(e=!1,t){if(this.detachEvents(),this.element.style.cursor="auto",e){const e=document.createDocumentFragment();this.innerElements.forEach(t=>{e.appendChild(t)}),this.element.innerHTML="",this.element.appendChild(e),this.element.removeAttribute("style")}t&&t.call(this)}}class Launch{constructor(){this.panorama,this.map,this.photoCounter=document.querySelector(".launch__photo-counter"),this.videoCounter=document.querySelector(".launch__video-counter"),this.init()}photoGallery(){this.photo=new JetSlider({element:".launch__photo",prev:".launch__photo-prev",next:".launch__photo-next",slidesToShow:1,slidesToScroll:1,speed:650,gap:30,momentum:!0,weight:100,loop:!0,onChange:e=>{this.photoCounter.innerHTML=e,this.photoThumb&&this.photoThumb.goTo(e-1)}})}videoGallery(){this.video=new JetSlider({element:".launch__video",prev:".launch__video-prev",next:".launch__video-next",slidesToShow:1,slidesToScroll:1,speed:650,gap:30,momentum:!0,weight:100,loop:!0,onChange:e=>{this.videoCounter.innerHTML=e,this.videoThumb&&this.videoThumb.goTo(e-1)}})}photoGalleryThumb(){this.photoThumb=new JetSlider({element:".launch__photo-thumb",prev:".launch__photo-thumb-prev",next:".launch__photo-thumb-next",slidesToShow:{568:3,821:5,1081:7,1341:9,1601:12},slidesToScroll:{568:1},speed:650,gap:30,momentum:!0,weight:100,onResize:()=>this.photoThumbClick(),onComplete:()=>this.photoThumbClick()})}videoGalleryThumb(){this.videoThumb=new JetSlider({element:".launch__video-thumb",prev:".launch__video-thumb-prev",next:".launch__video-thumb-next",slidesToShow:{568:3,821:5,1081:7,1341:9,1601:12},slidesToScroll:{568:1},speed:650,gap:30,momentum:!0,weight:100,onResize:()=>this.videoThumbClick(),onComplete:()=>this.videoThumbClick()})}photoThumbClick(){const e=document.querySelectorAll(".launch__photo-thumb__item");e.forEach((e,t)=>{e.addEventListener("click",()=>{this.photo.goTo(t),this.photoThumb.goTo(t)})})}videoThumbClick(){const e=document.querySelectorAll(".launch__video-thumb__item");e.forEach((e,t)=>{e.addEventListener("click",()=>{this.video.goTo(t),this.videoThumb.goTo(t)})})}expandBtn(){const e=document.querySelectorAll(".launch__gallery-expand");e.forEach(e=>{e.addEventListener("click",()=>{setTimeout(()=>{this.photo.resize(),this.photoThumb.resize()})})})}photoBtn(){const e=document.querySelector(".launch__gallery-photo"),t=document.querySelector(".launch__gallery-video"),i=document.querySelector(".launch__photo-box"),s=document.querySelector(".launch__video-box"),o=document.querySelector(".launch__photo-thumb-box"),n=document.querySelector(".launch__video-thumb-box");e&&e.classList.add("active"),e&&e.addEventListener("click",()=>{e&&e.classList.add("active"),t&&t.classList.remove("active"),i.classList.remove("active"),s.classList.remove("active"),o.classList.remove("active"),n.classList.remove("active")})}videoBtn(){const e=document.querySelector(".launch__gallery-photo"),t=document.querySelector(".launch__gallery-video"),i=document.querySelector(".launch__photo-box"),s=document.querySelector(".launch__video-box"),o=document.querySelector(".launch__photo-thumb-box"),n=document.querySelector(".launch__video-thumb-box");t&&t.addEventListener("click",()=>{e&&e.classList.remove("active"),t&&t.classList.add("active"),i.classList.add("active"),s.classList.add("active"),o.classList.add("active"),n.classList.add("active")})}unity(){return new JetSlider({element:".unity",prev:".unity__prev",next:".unity__next",slidesToShow:{0:1,568:2,821:3,1081:4},slidesToScroll:{0:1,568:2,821:3,1081:4},speed:650,gap:30,momentum:!0,weight:100,loop:!1,autoplay:!1,autoplaySpeed:5e3,stopOnOver:!0,pagination:".unity__pagination"})}img(){const e=document.querySelectorAll(".unity__hover");e.forEach(e=>{const t=e.querySelector(".unity__box");if(t&&t.children.length>0){const i=e.querySelector(".unity__photo-prev"),s=e.querySelector(".unity__photo-next"),o=e.querySelector(".unity__photo-bullets");return new JetSlider({element:t,speed:650,draggable:!1,prev:i,next:s,pagination:o})}})}init(){window.scrollTo(0,0),this.photoGallery(),this.videoGallery(),this.photoGalleryThumb(),this.videoGalleryThumb(),this.expandBtn(),this.photoBtn(),this.videoBtn(),this.unity(),this.img()}}class List{constructor(){this.init()}closeSearch(){const e=document.querySelector("#jetwindow-search"),t=document.querySelector(".search__btn");t.addEventListener("click",()=>{e.checked=!1})}pagination(){const e=document.querySelector(".ui__pagination-box");if(e){new JetPagination({container:".ui__pagination",previous:".ui__pagination-previous",next:".ui__pagination-next",active:sessionStorage.getItem("pagina"),total:e.dataset.total,left:{568:2,0:1},right:{568:2,0:1},onComplete:()=>router.updateLinks()})}}mapButton(){const e=document.querySelector(".list__map-btn");e&&e.addEventListener("click",this.mapButtonHandler.bind(this))}mapButtonHandler(){const e=document.querySelector(".list"),t=["css/leaflet.min.css","js/leaflet.min.js"];this.map?(e.classList.toggle("list--map-opened"),this.checkMapButton(e)):this.loadScript(t,()=>{const t=sessionStorage.getItem("filtro.tipodivulgacao"),i=sessionStorage.getItem(`map-${t}`);e.classList.add("list--map-opened"),i?(this.data=JSON.parse(i),this.createMap()):this.loadData()})}checkMapButton(e){setTimeout(()=>{const t=document.querySelectorAll(".list__map-btn-text");t.forEach(t=>{e.classList.contains("list--map-opened")?t.innerHTML="Fechar mapa":t.innerHTML="Imóveis no mapa"})},100)}loadScript(e,t){const i=e.map(e=>this.createTag(e));Promise.all(i).then(t)}createTag(e){return new Promise(t=>{const i=e.split(".").pop(),s="js"===i?"script":"link",o="js"===i?"src":"href",n=document.createElement(s),a=document.querySelector(`${s}[${o}="${e}"]`);a&&a.remove(),n[o]=e,"css"===i&&(n.rel="stylesheet"),document.body.appendChild(n),n.onload=(()=>t(e))})}createMap(){const e=document.querySelector(".list"),t=this.data.map(e=>[e.lat,e.lng]);this.map=L.map("map");const i=["js/leaflet.markercluster.min.js"];this.loadScript(i,()=>{this.clusters=L.markerClusterGroup({chunkedLoading:!0}),this.createTile(),this.data.forEach(e=>this.createMarker(e,this.createIcon(e.tipoImovelPadrao))),this.map.addLayer(this.clusters),this.checkMapButton(e),this.removeHashLink(),setTimeout(()=>this.map.fitBounds(t),1e3),router.updateLinks()})}updateMap(){const e=document.querySelector(".list");this.checkMapButton(e),e.classList.contains("list--map-opened")&&this.createMap()}loadData(){new JetLoader({url:`${config.imoveisBaseUrl}?filtro.${config.tipoCliente}id=${config.id}&filtro.tipodivulgacao=${sessionStorage.getItem("filtro.tipodivulgacao")}&pagina=1&maximo=999999`,onSuccess:e=>{const t=sessionStorage.getItem("filtro.tipodivulgacao");this.getMapData(e),sessionStorage.setItem(`map-${t}`,JSON.stringify(this.data)),this.createMap()}})}getMapData(e){const t=e.data.buscaImovelId,i=e.data.resultado;this.data=[];for(let e in i){const s=i[e],o=this.cleanUrl(s.tipoImovelDescricao),n=s.imovelQuartos?`-${s.imovelQuartos}-quartos`:"",a=s.imovelEnderecoBairro?`-${this.cleanUrl(s.imovelEnderecoBairro)}`:"",r=s.imovelEnderecoCidade?`-${this.cleanUrl(s.imovelEnderecoCidade)}`:"",l=s.imovelVagas?"-com-garagem":"",c=s.imovelAreaUtil?`-${Math.floor(s.imovelAreaUtil)}m2`:"",h=s.imovelValorVenda,d=s.imovelValorAluguel-s.imovelValorMultaDesconto;let u=`-venda-locacao-rs-${h}-rs-${d}`;s.imovelVenda&&!s.imovelLocacao?u=`-venda-rs-${h}`:!s.imovelVenda&&s.imovelLocacao&&(u=`-locacao-rs-${d}`);const m=`${config.pageImovel}/${o}${n}${a}${r}${l}${c}${u}?id=${s.clienteId}&ref=${s.imovelReferencia}&search=${t}`,g={referencia:s.imovelReferencia,img:s.urlFotoPrincipalMedia,tipoimovel:s.tipoImovelDescricao,tipoImovelPadrao:s.tipoImovelPadrao,tipoendereco:s.imovelTipoEndereco,endereco:s.imovelEndereco,estado:s.imovelEnderecoEstado,cidade:s.imovelEnderecoCidade,bairro:s.imovelEnderecoBairro,banheiro:s.imovelBanheiros||0,quarto:s.imovelQuartos,vaga:s.imovelVagas>2?s.imovelVagas-2:0,areaTotal:s.imovelAreaTotal,areaUtil:s.imovelAreaUtil,valorVenda:s.imovelVenda?s.imovelValorVenda:"",valorLocacao:s.imovelLocacao?s.imovelValorAluguel-s.imovelValorMultaDesconto:"",lat:s.imovelEnderecoLatitude,lng:s.imovelEnderecoLongitude,url:m}
;this.data.push(g)}}cleanUrl(e){return e=e.replace(/[`~!@#$%^&*()_|+\-=?;:'",<>\{\}\[\]\\\/]/gi," "),e=e.replace(/\s+/g,"-"),e=e.toLowerCase(),e}createTile(){const e="https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw";L.tileLayer(e,{id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(this.map)}createMarker(e,t){this.clusters.addLayer(L.marker([e.lat,e.lng],{icon:t}).bindPopup(this.createPopUp(e)).on("click",()=>{setTimeout(()=>{this.removeHashLink(),router.updateLinks()})}))}createIcon(e){return L.icon({iconUrl:`svg/${e}.svg`,iconSize:[40,40],iconAnchor:[20,20]})}createPopUp(e){return`<a href="${e.url}">\n            <img class="list__map-img" src="${e.img}" width="150" height="50">\n            <div class="list__map-content">\n                ${e.referencia}\n                <strong class="list__map-type">${e.tipoimovel}</strong>\n                ${e.tipoendereco}. ${e.endereco}<br>\n                ${e.bairro} - ${e.cidade}/${e.estado}\n                <div class="list__map-price">\n                    ${e.valorVenda?`Venda: <strong>R$ ${e.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})}</strong>`:""}\n                    ${e.valorLocacao?`Locação: <strong>R$ ${e.valorLocacao.toLocaleString("pt-BR",{minimumFractionDigits:2})}</strong>`:""}\n                </div>\n                ${e.areaTotal>0?`<div class="list__map-feature">\n                        <span class="list__map-feature-icon"><img src="svg/area.svg"></span>\n                        ${e.areaTotal.toLocaleString("pt-BR")}m² total\n                    </div>`:""}\n                ${e.areaUtil>0?`<div class="list__map-feature">\n                        <span class="list__map-feature-icon"><img src="svg/area.svg"></span>\n                        ${e.areaUtil.toLocaleString("pt-BR")}m² útil\n                    </div>`:""}\n                ${e.banheiro>0?`<div class="list__map-feature">\n                        <span class="list__map-feature-icon"><img src="svg/bathroom.svg"></span>\n                        ${e.banheiro} banheiro(s)\n                    </div>`:""}\n                ${e.vaga>0?`<div class="list__map-feature">\n                        <span class="list__map-feature-icon"><img src="svg/garage.svg"></span>\n                        ${e.vaga} vaga(s)\n                    </div>`:""}\n                ${e.quarto>0?`<div class="list__map-feature">\n                        <span class="list__map-feature-icon"><img src="svg/bedroom.svg"></span>\n                        ${e.quarto} quarto(s)\n                    </div>`:""}\n            </div>\n        </a>`}removeHashLink(){const e=document.querySelectorAll(".list__map a[href]");e.forEach(e=>{e.href.includes("#")&&e.removeAttribute("href")})}closeMap(){const e=document.querySelector(".list__map-close"),t=document.querySelector(".list");e.addEventListener("click",()=>{t.classList.remove("list--map-opened"),this.checkMapButton(t)})}noResult(){const e=document.querySelector(".list__no-result");if(e){new JetSlider({element:".list__no-result",prev:".list__no-result-prev",next:".list__no-result-next",slidesToShow:{0:1,568:2,821:3,1081:4},slidesToScroll:{0:1,568:2,821:3,1081:4},speed:650,gap:30,pagination:".list__no-result-pagination"})}}init(){router.updateLinks(),new SearchList,this.closeSearch(),this.pagination(),this.updateMap(),this.mapButton(),this.closeMap(),this.noResult()}}class Main{constructor(e,t){this.init(e,t)}setStorage(e){sessionStorage.setItem("maximo",config.imoveisPagina),sessionStorage.getItem("filtro.tipodivulgacao")||sessionStorage.setItem("filtro.tipodivulgacao",config.imovelpara);for(const t in e)if(e[t]){const i=e[t];sessionStorage.setItem(t,i)}else sessionStorage.removeItem(t)}setClasses(e){global.root&&(e=e.split(global.root)[1]),e="/"===e?"index":e.split("/").join("-").substring(1).split(".")[0],document.body.className=`body__${e}`}asideAnimation(){const e=document.querySelector("html");if(e.classList.contains("jetbrowser__desktop")){const e=document.querySelectorAll("[data-depth]");e.forEach(e=>{window.addEventListener("mousemove",this.mouseMoveHandler.bind(this,e),{passive:!0})})}}mouseMoveHandler(e){const t=e.dataset.depth,i=-(event.clientX-window.innerWidth/2),s=i/t;e.style.transform=`translateX(${s}%)`}visited(){const e=document.querySelectorAll(".ui__card-link"),t=window.location.host,i=window.location.pathname;localStorage.setItem(`visited-${i}`,!0),e.forEach(e=>{const i=localStorage.getItem(`visited-${e.pathname}`);e.host===t&&i&&(e.dataset.visited=!0)})}lgpd(){const e=document.querySelector(".lgpd__input"),t=document.querySelector(".lgpd__close"),i=localStorage.getItem("lgpd");t.addEventListener("click",()=>localStorage.setItem("lgpd",!0)),e.checked=!i}init(e,t){this.setStorage(parameters),this.setClasses(e),this.asideAnimation(),this.visited(),this.lgpd(),new Navigation(t),new Favorite,new Form}}class Navigation{constructor(e){this.init(e)}selectButton(e){e=e.replace(/(\?.*)/g,"");const t=this.getPath(e);this.deselectButton(),t.forEach((e,i)=>{e===global.root&&1===t.length&&(e=`${e}/`);let s=document.querySelectorAll(`nav [href="${e}"]`);if(0===i&&e!==`${global.root}/`){const t=e.substring(e.lastIndexOf("/")+1).split("-")[0];e=e.substring(0,e.lastIndexOf("/")),e=`${e}/${t}`,s=document.querySelectorAll(`nav [href^="${e}"]`)}s.forEach(e=>e.classList.add("active"))}),this.closeNav()}getPath(e){let t=e.split("/").reduce((e,t)=>(""!==t&&e&&e.push(t),e),[]).reduce((e,t,i,s)=>(e.push(`/${s.slice(0,s.length-i).join("/")}`),e),[]);return"/"===e&&(t=["/"]),t}deselectButton(){const e=document.querySelectorAll(".nav__btn, .footer__btn");e.forEach(e=>{e.classList.remove("active")})}closeNav(){var e=document.querySelector("#jetwindow-nav");e.checked=!1}init(e){this.selectButton(e)}}class Page{setMetas(e){const t=document.querySelectorAll('meta[name*="title"]'),i=document.querySelectorAll('meta[name*="description"], meta[itemprop*="description"]'),s=document.querySelectorAll('meta[name*="keywords"]'),o=document.querySelectorAll('meta[name*="image"], meta[itemprop*="image"]'),n=document.querySelectorAll('meta[name="robots"]'),a=document.querySelectorAll('meta[name*="url"]'),r=document.querySelector('[rel="canonical"]'),l=[[t,e.title],[i,e.description],[s,e.keywords],[o,e.image],[n,e.robots],[a,e.url]];document.title=e.title,r.setAttribute("href",e.url),l.forEach(e=>{e[0].forEach(t=>{t.setAttribute("content",e[1])})})}addPreloader(e){const t=document.querySelector(".ui__preloader");this.finishAnimation=!1,t.classList.add("ui__preloader--in"),e(),setTimeout(()=>{this.finishAnimation=!0},700)}removePreloader(e){const t=document.querySelector(".ui__preloader"),i=setInterval(()=>{this.finishAnimation&&(this.finishAnimation=!1,t.classList.add("ui__preloader--out"),clearInterval(i),e(),setTimeout(()=>{t.classList.remove("ui__preloader--in","ui__preloader--out")},700))},10)}load(e,t,i){this.lastPage?this.addPreloader(this.ajaxLoad.bind(this,e,t,i)):this.init(e,t,i)}ajaxLoad(e,t,i){const s=new FormData;s.append("url",t);new JetLoader({url:e,method:"post",header:{"X-Requested-With":"XMLHttpRequest"},body:s,onSuccess:s=>{s=JSON.parse(s),config=s.config,parameters=s.parameters,this.setMetas(s.seo),this.removePreloader(this.render.bind(this,e,t,s.content,i))}})}render(e,t,i,s){e!==this.lastPage?this.pageRender(i):this.templateRender(i),this.setState(t),this.goToTop(),this.init(e,t,s)}pageRender(e){const t=document.querySelector(".container");t.innerHTML=e}templateRender(e){const t=document.createDocumentFragment(),i=document.createElement("div");i.innerHTML=e,t.appendChild(i);const s=t.querySelectorAll("[data-template]"),o=document.querySelectorAll("[data-template]");s.forEach((e,t)=>{o[t].innerHTML=e.innerHTML})}setState(e,t){history.state===e||this.pop||history.pushState({url:e,title:t},t,e)}goToTop(){this.pop||window.scrollTo(0,0)}init(e,t,i){new Main(e,t),i&&i(),this.pop=!1,this.lastPage=e,router.updateLinks()}}class Release{constructor(){this.init()}pagination(){const e=document.querySelector(".ui__pagination-box");if(e){new JetPagination({container:".ui__pagination",previous:".ui__pagination-previous",next:".ui__pagination-next",active:e.dataset.page,total:e.dataset.total,left:{568:2,0:1},right:{568:2,0:1},concatenateWith:"/",onComplete:()=>router.updateLinks()})}}init(){this.pagination()}}class SearchIndex extends Filters{constructor(e){super(config.pageImoveis),this.init()}imovelpara(){new JetSelect({element:".search-index__type",name:["filtro.tipodivulgacao"],optionsText:["Comprar","Alugar"],optionsValue:["v","l"],label:"Selecione",tags:!0,tagsTarget:".list__tags",onClickTag:()=>super.search(),onChange:()=>{super.removeStorage(),super.createFilters(this.filters.bind(this)),super.createPath()}})}tipoimovel(e){new JetSelect({element:".search-index__property",name:"filtro.tiposimoveis",optionsText:e.tipoImovelDescricao,optionsValue:e.tipoImovelDescricao,label:"Tipo",tags:!0,tagsTarget:".list__tags",onClickTag:()=>super.search(),onChange:()=>super.createPath()})}cidade(e){new JetSelect({element:".search-index__city",name:"filtro.cidade",optionsText:e.cidadeNome,optionsValue:e.cidadeNome,label:"Cidade",tags:!0,tagsTarget:".list__tags",onClickTag:()=>super.search(),onChange:()=>super.createPath()})}filters(e){this.imovelpara(),this.tipoimovel(e.searchtipoimoveis),this.cidade(e.searchcidades)}init(){super.createFilters(this.filters.bind(this)),super.createPath()}}class SearchList extends Filters{constructor(e){super(config.pageImoveis),this.init()}imovelpara(){new JetSelect({element:".search__type",name:["filtro.tipodivulgacao"],optionsText:["Comprar","Alugar"],optionsValue:["v","l"],label:"Selecione",tags:!0,tagsTarget:".list__tags",onClickTag:()=>super.search(),onChange:()=>{super.removeStorage(),super.createFilters(this.filters.bind(this)),this.referenciaFilter.empty(),this.enderecoFilter.empty(),super.createPath()}})}tipoimovel(e){new JetSelect({element:".search__property",name:"filtro.tiposimoveis",optionsText:e.tipoImovelDescricao,optionsValue:e.tipoImovelDescricao,type:"multiple",deselectAll:"Limpar seleção",label:"Selecione",tags:!0,tagsTarget:".list__tags",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}valorMinimo(){let e,t;"v"===sessionStorage.getItem("filtro.tipodivulgacao")?(e=["De R$ 50.000","De R$ 100.000","De R$ 150.000","De R$ 200.000","De R$ 250.000","De R$ 300.000","De R$ 400.000","De R$ 500.000","De R$ 600.000","De R$ 700.000","De R$ 800.000","De R$ 900.000","De R$ 1.000.000"],t=[5e4,1e5,15e4,2e5,25e4,3e5,4e5,5e5,6e5,7e5,8e5,9e5,1e6]):(e=["Até R$ 400","Até R$ 800","Até R$ 1.000","Até R$ 1500","Até R$ 2.000","Até R$ 3.000","Até R$ 4.000","Até R$ 5.000","Até R$ 6.000","Até R$ 7.000","Até R$ 8.000","Até R$ 9.000","Até R$ 10.000","Até R$ 15.000"],t=[400,800,1e3,1500,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,15e3]);new JetSelect({element:".search__min-price",name:"filtro.valorminimo",optionsText:e,optionsValue:t,deselectAll:"Limpar seleção",label:"Selecione",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}valorMaximo(){let e,t;"v"===sessionStorage.getItem("filtro.tipodivulgacao")?(e=["Até R$ 100.000","Até R$ 150.000","Até R$ 200.000","Até R$ 300.000","Até R$ 400.000","Até R$ 600.000","Até R$ 800.000","Até R$ 1.000.000","Até R$ 1.500.000","Até R$ 2.000.000","Até R$ 3.000.000","Acima de R$ 3.000.000"],t=[1e5,15e4,2e5,3e5,4e5,6e5,8e5,1e6,15e5,2e6,3e6,999999999999]):(e=["Até R$ 400","Até R$ 800","Até R$ 1.000","Até R$ 1500","Até R$ 2.000","Até R$ 3.000","Até R$ 4.000","Até R$ 5.000","Até R$ 6.000","Até R$ 7.000","Até R$ 8.000","Até R$ 9.000","Até R$ 10.000","Até R$ 15.000","Acima de R$ 15.000"],t=[400,800,1e3,1500,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,15e3,99999999]);new JetSelect({element:".search__max-price",name:"filtro.valormaximo",optionsText:e,optionsValue:t,deselectAll:"Limpar seleção",label:"Selecione",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}cidade(e){new JetSelect({element:".search__city",name:"filtro.cidade",optionsText:e.cidadeNome,optionsValue:e.cidadeNome,type:"multiple",deselectAll:"Limpar seleção",label:"Selecione",tags:!0,tagsTarget:".list__tags",onDeselectAll:()=>{super.createFilters(this.filters.bind(this)),super.createPath()},onClickTag:()=>super.search(),onChange:()=>{this.bairroFilter.removeStorage(),super.createFilters(this.filters.bind(this)),super.createPath()}})}bairro(e){this.bairroFilter||(this.bairroFilter=new JetSelect({element:".search__neighborhood",name:"filtro.bairro",type:"multiple",deselectAll:"Limpar seleção",label:"Selecione",sortTitle:!0,tags:!0,tagsTarget:".list__tags",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})),super.addData({filter:this.bairroFilter,text:e.bairroNome,value:e.bairroNome,sort:e.bairroCidade})}regiao(e){new JetSelect({element:".search__region",name:"filtro.regiaocidade",optionsText:e.opcoes[0].split(";"),optionsValue:e.valor,deselectAll:"Limpar seleção",label:"Selecione",tags:!0,tagsTarget:".list__tags",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}quarto(){new JetSelect({element:".search__bedroom",name:["filtro.quarto","filtro.quartoini"],optionsText:["1","2","3","4+"],optionsValue:[["1",null],["2",null],["3",null],[null,"4"]],deselectAll:"Limpar seleção",label:"Selecione",tags:!0,tagsOnChange:!1,tagsTarget:".list__tags",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}garagem(){new JetSelect({element:".search__garage",name:["filtro.vagagaragem","filtro.vagaini"],optionsText:["Sim","Não","1","2","3","4+"],optionsValue:[["1",null],["2",null],["3",null],["4",null],["5",null],[null,"6"]],deselectAll:"Limpar seleção",label:"Selecione",tags:!0,tagsOnChange:!1,tagsTarget:".list__tags",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}areaMinima(){new JetSelect({element:".search__min-area",name:"filtro.areatotalminima",optionsText:["De 60m²","De 100m²","De 200m²","De 300m²","De 400m²","De 500m²","De 600m²","De 700m²","De 800m²","De 900m²","De 1.000m²","De 2.000m²","De 3.000m²","De 4.000m²","De 5.000m²","De 10.000m²","De 20.000m²","De 30.000m²","De 40.000m²","De 50.000m²","De 100.000m²"],optionsValue:[60,100,200,300,400,500,600,700,800,900,1e3,2e3,3e3,4e3,5e3,1e4,2e4,3e4,4e4,5e4,1e5],deselectAll:"Limpar seleção",label:"Selecione",tags:!0,tagsTarget:".list__tags",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}areaMaxima(){new JetSelect({element:".search__max-area",name:"filtro.areatotalmaxima",optionsText:["Até 100m²","Até 200m²","Até 300m²","Até 400m²","Até 500m²","Até 600m²","Até 700m²","Até 800m²","Até 900m²","Até 1.000m²","Até 2.000m²","Até 3.000m²","Até 4.000m²","Até 5.000m²","Até 10.000m²","Até 20.000m²","Até 30.000m²","Até 40.000m²","Até 50.000m²","Até 100.000m²","Acima de 100.000m²"],optionsValue:[100,200,300,400,500,600,700,800,900,1e3,2e3,3e3,4e3,5e3,1e4,2e4,3e4,4e4,5e4,1e5,9999999999],deselectAll:"Limpar seleção",label:"Selecione",tags:!0,tagsTarget:".list__tags",onDeselectAll:()=>super.createPath(),onClickTag:()=>super.search(),onChange:()=>super.createPath()})}mobiliado(){new JetCheckbox({element:".search__furnished",name:"filtro.mobiliado",optionsText:["Mobiliado"],optionsValue:["1"],tags:!0,tagsOnChange:!1,tagsTarget:".list__tags",onClickTag:()=>super.search(),onChange:()=>super.createPath()})}condominio(){new JetCheckbox({element:".search__condominium",name:"filtro.condominio",optionsText:["Condomínio"],optionsValue:["1"],tags:!0,tagsOnChange:!1,tagsTarget:".list__tags",onClickTag:()=>super.search(),onChange:()=>super.createPath()})}referencia(){this.referenciaFilter=new JetInput({element:".search__reference",name:"filtro.referencia",placeholder:"Digite a referência do imóvel",tags:!0,tagsTarget:".list__tags",onClickTag:()=>{sessionStorage.setItem("filtro.tipodivulgacao",config.imovelpara),super.search()},onKeyUp:()=>super.createPath(),onPaste:()=>super.createPath(),onEmpty:()=>super.createPath()})}endereco(){this.enderecoFilter=new JetInput({element:".search__address",name:"filtro.endereco",placeholder:"Digite o nome da rua",tags:!0,tagsTarget:".list__tags",onClickTag:()=>{sessionStorage.setItem("filtro.tipodivulgacao",config.imovelpara),super.search()},onKeyUp:()=>super.createPath(),onPaste:()=>super.createPath(),onEmpty:()=>super.createPath()})}ordenar(){new JetSelect({element:".list__order",name:["ordenacao","ascdesc"],optionsText:["Maior preço","Menor preço","Maior área total","Menor área total"],optionsValue:[["imovelvalor","desc"],["imovelvalor","asc"],["imovelareatotal","desc"],["imovelareatotal","asc"]],deselectAll:"Limpar seleção",label:"Selecione",onDeselectAll:()=>super.search(),onChange:()=>super.search()})}filters(e){this.imovelpara(),this.tipoimovel(e.searchtipoimoveis),this.valorMinimo(),this.valorMaximo(),this.cidade(e.searchcidades),this.bairro(e.searchbairros),this.regiao(e.searchregioescidades),this.quarto(),this.garagem(),this.areaMinima(),this.areaMaxima(),this.mobiliado(),this.condominio(),this.referencia(),this.endereco(),this.ordenar()}init(){super.createFilters(this.filters.bind(this)),super.createPath()}}